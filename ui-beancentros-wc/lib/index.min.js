!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("uiBeancentrosWc",[],t):"object"==typeof exports?exports.uiBeancentrosWc=t():e.uiBeancentrosWc=t()}(window,function(){return function(e){var t={};function n(i){if(t[i])return t[i].exports;var s=t[i]={i:i,l:!1,exports:{}};return e[i].call(s.exports,s,s.exports,n),s.l=!0,s.exports}return n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)n.d(i,s,function(t){return e[t]}.bind(null,s));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=17)}([function(e,t){e.exports=function(e){return"string"!=typeof e?e:(/^['"].*['"]$/.test(e)&&(e=e.slice(1,-1)),/["'() \t\n]/.test(e)?'"'+e.replace(/"/g,'\\"').replace(/\n/g,"\\n")+'"':e)}},function(e,t){e.exports=function(e){var t=[];return t.toString=function(){return this.map(function(t){var n=function(e,t){var n=e[1]||"",i=e[3];if(!i)return n;if(t&&"function"==typeof btoa){var s=function(e){return"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(e))))+" */"}(i),r=i.sources.map(function(e){return"/*# sourceURL="+i.sourceRoot+e+" */"});return[n].concat(r).concat([s]).join("\n")}return[n].join("\n")}(t,e);return t[2]?"@media "+t[2]+"{"+n+"}":n}).join("")},t.i=function(e,n){"string"==typeof e&&(e=[[null,e,""]]);for(var i={},s=0;s<this.length;s++){var r=this[s][0];"number"==typeof r&&(i[r]=!0)}for(s=0;s<e.length;s++){var o=e[s];"number"==typeof o[0]&&i[o[0]]||(n&&!o[2]?o[2]=n:n&&(o[2]="("+o[2]+") and ("+n+")"),t.push(o))}},t}},function(e,t){e.exports="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4KPCEtLSBHZW5lcmF0b3I6IEFkb2JlIElsbHVzdHJhdG9yIDE5LjEuMCwgU1ZHIEV4cG9ydCBQbHVnLUluIC4gU1ZHIFZlcnNpb246IDYuMDAgQnVpbGQgMCkgIC0tPgo8c3ZnIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgeD0iMHB4IiB5PSIwcHgiIHdpZHRoPSIyNHB4IgoJIGhlaWdodD0iMjRweCIgdmlld0JveD0iMCAwIDI0IDI0IiBlbmFibGUtYmFja2dyb3VuZD0ibmV3IDAgMCAyNCAyNCIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSI+CjxnIGlkPSJCb3VuZGluZ19Cb3hlcyI+Cgk8ZyBpZD0idWlfeDVGX3NwZWNfeDVGX2hlYWRlcl9jb3B5XzMiIGRpc3BsYXk9Im5vbmUiPgoJPC9nPgoJPHBhdGggZmlsbD0ibm9uZSIgZD0iTTAsMGgyNHYyNEgwVjB6Ii8+CjwvZz4KPGcgaWQ9IlJvdW5kZWRfMV8iPgoJPGcgaWQ9InVpX3g1Rl9zcGVjX3g1Rl9oZWFkZXJfY29weV82IiBkaXNwbGF5PSJub25lIj4KCTwvZz4KCTxwYXRoIGQ9Ik0xOC4zLDUuNzFMMTguMyw1LjcxYy0wLjM5LTAuMzktMS4wMi0wLjM5LTEuNDEsMEwxMiwxMC41OUw3LjExLDUuN2MtMC4zOS0wLjM5LTEuMDItMC4zOS0xLjQxLDBsMCwwCgkJYy0wLjM5LDAuMzktMC4zOSwxLjAyLDAsMS40MUwxMC41OSwxMkw1LjcsMTYuODljLTAuMzksMC4zOS0wLjM5LDEuMDIsMCwxLjQxaDBjMC4zOSwwLjM5LDEuMDIsMC4zOSwxLjQxLDBMMTIsMTMuNDFsNC44OSw0Ljg5CgkJYzAuMzksMC4zOSwxLjAyLDAuMzksMS40MSwwbDAsMGMwLjM5LTAuMzksMC4zOS0xLjAyLDAtMS40MUwxMy40MSwxMmw0Ljg5LTQuODlDMTguNjgsNi43MywxOC42OCw2LjA5LDE4LjMsNS43MXoiLz4KPC9nPgo8L3N2Zz4K"},function(e,t){e.exports="<div id='client'>\r\n\r\n</div>"},function(e,t,n){var i=n(0);(e.exports=n(1)(!1)).push([e.i,":host {\n  all: initial;\n  display: block;\n  box-sizing: border-box;\n  --color-caret: rgb(230, 237, 148);\n  font: inherit;\n  color: inherit; }\n\n#client {\n  height: 100%;\n  overflow: auto;\n  padding: 0.7em;\n  position: relative;\n  box-sizing: border-box; }\n\n.icon {\n  display: inline-block;\n  background-image: url("+i(n(11))+");\n  background-size: cover;\n  background-repeat: no-repeat;\n  background-position: center;\n  width: 0.7em;\n  height: 0.7em;\n  padding: .1em;\n  margin-right: 0.1em;\n  border: 1px solid #aaa;\n  border-radius: 2px;\n  cursor: pointer; }\n  .icon:hover {\n    background-color: #aaa; }\n\n.text {\n  display: inline-block;\n  padding: 0.3em 0.3em;\n  border-radius: 0.2em;\n  cursor: pointer;\n  line-height: 1.3;\n  position: relative;\n  top: -.2em; }\n  .text.sel {\n    background-color: var(--color-caret); }\n\n.node {\n  position: relative; }\n  .node > span {\n    position: absolute;\n    border-left: 1px solid #aaa;\n    display: inline-block;\n    height: 1.9em;\n    width: 0;\n    top: -1.1em; }\n    .node > span.ph {\n      top: -.6em;\n      height: 1.4em; }\n  .node:not(.raiz)::before {\n    content: '';\n    position: absolute;\n    display: inline-block;\n    height: 0;\n    width: 0.9em;\n    border-top: 1px solid #aaa;\n    top: 0.7em;\n    left: -0.9em; }\n  .node .hijos {\n    padding-left: 1.4em;\n    position: relative;\n    /*&::before{\r\n            content: '';\r\n            position: absolute;\r\n            display: inline-block;\r\n            height: calc(100% - 0.5em);\r\n            width: 0;\r\n            border-left: 1px solid #aaa;\r\n            top: -0.46em;\r\n            left: 0.45em;\r\n        }*/ }\n  .node.terminal .icon {\n    border-color: transparent;\n    background-color: transparent;\n    background-image: url("+i(n(12))+");\n    cursor: default; }\n  .node.terminal .hijos {\n    display: none; }\n  .node.collapsed .icon {\n    background-image: url("+i(n(13))+"); }\n  .node.collapsed .hijos {\n    display: none; }\n",""])},function(e,t){e.exports="<div id='popup'>\r\n    <div id='client'>\r\n        \x3c!--<span class='aspa'></span>--\x3e\r\n        <slot></slot>\r\n    </div>\r\n</div>"},function(e,t,n){var i=n(0);(e.exports=n(1)(!1)).push([e.i,":host {\n  all: initial;\n  display: block;\n  box-sizing: border-box;\n  font: inherit;\n  color: inherit; }\n\n* {\n  box-sizing: border-box; }\n\n#popup {\n  width: 100vw;\n  height: 100vh;\n  position: fixed;\n  z-index: 10000;\n  /*suficiente?*/\n  top: 0;\n  left: 0;\n  background-color: rgba(0, 0, 0, 0.3);\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  animation: tr .3s ease-in-out;\n  transition: opacity .3s ease-in-out; }\n\n#client {\n  background-color: white;\n  border-radius: 0.3em;\n  box-shadow: 0.2em 0.2em 0.3em #888;\n  padding: .5em;\n  /*padding-top: 2.2em;*/\n  position: relative;\n  animation: pop .5s;\n  animation-timing-function: cubic-bezier(0.71, 0.55, 0.62, 1.57);\n  transition: transform .3s ease-in-out; }\n\n.aspa {\n  position: absolute;\n  top: 0.5em;\n  right: 0.5em;\n  padding: 0.7em 0 0 0.7em;\n  background-image: url("+i(n(2))+");\n  background-size: cover;\n  background-repeat: no-repeat;\n  background-position: center;\n  cursor: pointer;\n  transition: opacity 0.3s ease; }\n  .aspa:hover {\n    opacity: 0.6; }\n\n@keyframes tr {\n  0% {\n    opacity: 0; }\n  100% {\n    opacity: 0.8; } }\n\n@keyframes pop {\n  0% {\n    transform: scale(0.1); }\n  100% {\n    transform: scale(1); } }\n",""])},function(e,t){e.exports='<p>Oficina:</p><input type="text" placeholder="00000" maxlength="5"/><button></button>\r\n'},function(e,t,n){var i=n(0);(e.exports=n(1)(!1)).push([e.i,":host {\n  all: initial;\n  display: inline-block;\n  box-sizing: border-box;\n  --color-caret: rgb(230, 237, 148);\n  --buttonface: #DDDDDD;\n  font: inherit;\n  color: inherit; }\n\n* {\n  box-sizing: border-box; }\n\np {\n  padding: .3em .4em .3em .7em;\n  display: inline-block;\n  margin: 0; }\n\ninput {\n  font: inherit;\n  color: inherit;\n  border-radius: 0.25em;\n  width: 4.2em;\n  outline: none;\n  border: none;\n  line-height: 1.9;\n  caret-color: var(--color-caret);\n  border: 1px solid #DADADA;\n  text-align: center;\n  background-color: #fff;\n  outline-offset: -.5em; }\n  input.animation-ok {\n    animation: tr .25s;\n    animation-direction: alternate; }\n  input.animation-err {\n    animation: tr-err .25s;\n    animation-direction: alternate; }\n  input.error {\n    outline: 1px solid #970302; }\n  input::selection {\n    background-color: var(--color-caret); }\n\nbutton {\n  font: inherit;\n  color: inherit;\n  box-shadow: 0 2px 2px var(--buttonface);\n  border: none;\n  outline: none;\n  margin-left: 0.5em;\n  padding: 1em;\n  border-radius: 0.2em;\n  background-image: url("+i(n(14))+");\n  background-color: var(--buttonface);\n  background-size: 80%;\n  background-repeat: no-repeat;\n  background-position: center;\n  vertical-align: super;\n  cursor: pointer;\n  transition: opacity, background-color 0.3s ease; }\n  button:not([disabled]):hover {\n    opacity: 0.6;\n    background-color: silver; }\n  button[disabled] {\n    background-color: silver; }\n\n@keyframes tr {\n  0% {\n    /*background-color: white;*/ }\n  100% {\n    background-color: rgba(200, 255, 200, 0.7); } }\n\n@keyframes tr-err {\n  0% {\n    /*background-color: white;*/ }\n  100% {\n    background-color: rgba(255, 200, 200, 0.7); } }\n",""])},function(e,t){e.exports="<div class=title>\r\n    Selección de centros\r\n    <span class='aspa'></span>\r\n</div>\r\n<div class='cuerpo'>\r\n    <div class='info'>\r\n        Empresa: <span class='empresa'></span>\r\n        Centro: <span class='centro'></span>\r\n        Descripción: <span class='desc'></span>\r\n    </div>\r\n    <div class='principal'>\r\n        <div class='tabs'>\r\n            <div class='tab jerarquia'>Jerarquía</div>\r\n            <div class='tab busqueda disabled'>Búsqueda</div>\r\n        </div>\r\n        <div id='clients'>\r\n            <div id='clientJ' class='client'>\r\n                <bk-wc-ui-tree></bk-wc-ui-tree>\r\n            </div>\r\n            <div id='clientB' class='client disabled'>\r\n                <div class='selectNiveles'>\r\n                    <div class='capNiveles'>\r\n                        <nav class='mostrar'>Mostrar centros de los siguientes niveles:</nav>\r\n                        <nav class='criterios'>Criterios de selección</nav>\r\n                        <span></span>\r\n                    </div>\r\n                    <div class='niveles'>\r\n                    </div>\r\n                    <div class='query'>\r\n                        <span>Filtrar resultados por centro: </span>\r\n                        <input type='text' id='filterCentro'/>\r\n                        <span>Descripción: </span>\r\n                        <input type='text' id='filterDesc'/>\r\n                        <button id='filtrar' disabled>Filtro</button>\r\n                    </div>\r\n                </div>\r\n                <div>\r\n                   <div id='resultados'></div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>\r\n<div class='botonera'>\r\n   <button class='aceptar' disabled>Aceptar</button>\r\n   <button class='abandonar'>Abandonar</button>\r\n</div>"},function(e,t,n){var i=n(0);(e.exports=n(1)(!1)).push([e.i,":host {\n  all: initial;\n  display: block;\n  box-sizing: border-box;\n  background-color: #f1f1f1;\n  padding: .5em;\n  border-radius: .4em;\n  font-size: .8em;\n  min-width: 50vw;\n  --back-claro: #ffffff;\n  --borde-std: #dbdbdb;\n  --color-caret: rgb(230, 237, 148);\n  font: inherit;\n  color: inherit; }\n\n* {\n  box-sizing: border-box; }\n\n.aspa {\n  position: absolute;\n  top: 0.4em;\n  right: 0.3em;\n  padding: 1em 0 0 1em;\n  background-image: url("+i(n(2))+");\n  background-size: cover;\n  background-repeat: no-repeat;\n  background-position: center;\n  cursor: pointer;\n  transition: opacity, background-color 0.3s ease;\n  border-radius: 1em; }\n  .aspa:hover {\n    opacity: 0.6;\n    background-color: silver; }\n\n.title {\n  position: relative;\n  padding: .3em;\n  padding-right: 3em;\n  border-bottom: 1px solid var(--borde-std);\n  border-radius: .4em;\n  background-color: #e5e5e5; }\n\n.cuerpo {\n  margin: 0.4em 0;\n  display: flex;\n  flex-direction: column;\n  max-width: 80vw; }\n\n.botonera {\n  padding: .6em .4em .4em .4em;\n  border-top: 1px solid var(--borde-std);\n  display: flex;\n  justify-content: flex-end; }\n\nbutton {\n  font: inherit;\n  color: inherit;\n  outline: none;\n  padding: .2em .7em .2em 1.4em;\n  border-radius: 0.1em;\n  background-image: linear-gradient(#f9f9f9, #f1f1f1);\n  background-color: var(--back-claro);\n  border: 1px solid var(--borde-std);\n  box-shadow: #787a74 0px 2px 1px -1px, white 0px 1px 0px 0px inset;\n  cursor: pointer;\n  transition: opacity 0.3s ease;\n  position: relative; }\n  button:not([disabled]):hover {\n    opacity: .7; }\n  button[disabled] {\n    background-image: linear-gradient(#e6e5e5, #f0efef); }\n  button::before {\n    content: '';\n    position: absolute;\n    top: 0.4em;\n    left: 0.2em;\n    padding: .9em 0 0 .9em;\n    background-size: cover;\n    background-repeat: no-repeat;\n    background-position: center; }\n  button.aceptar {\n    margin-right: .7em;\n    border-bottom: 2px solid #acb600; }\n    button.aceptar::before {\n      background-image: url("+i(n(15))+"); }\n  button.abandonar {\n    border-bottom: 2px solid #970302; }\n    button.abandonar::before {\n      background-image: url("+i(n(16))+"); }\n  button#filtrar {\n    border-bottom: 2px solid #948b8b;\n    padding-left: .7em; }\n\n.info {\n  background-color: var(--back-claro);\n  padding: .4em .7em;\n  display: flex;\n  border-radius: .2em;\n  border: 1px solid var(--borde-std); }\n  .info span:not(.desc) {\n    margin-right: .5em; }\n  .info span {\n    margin-left: .2em;\n    border-radius: .2em;\n    line-height: 1.5;\n    background-color: #e5e5e5;\n    border: 1px solid var(--borde-std);\n    padding: 0 1em 0 .5em;\n    color: #666;\n    font-size: .8em; }\n\n.principal {\n  margin: .7em 0 .5em 0;\n  /*max-width: 80vw;*/\n  height: 60vh;\n  display: flex;\n  flex-direction: column; }\n\n.tabs {\n  display: flex;\n  position: relative;\n  top: 1px; }\n  .tabs .tab + .tab {\n    margin-left: .5em; }\n  .tabs .tab {\n    border-radius: .3em .3em 0 0;\n    cursor: pointer;\n    padding: .3em 1.3em;\n    background-color: var(--back-claro);\n    border: 1px solid var(--borde-std);\n    border-top: 2px solid #acb600;\n    border-bottom: none;\n    transition: background-color .3s ease-out; }\n    .tabs .tab.disabled {\n      border: 1px solid var(--borde-std);\n      background-color: transparent; }\n\n#clients {\n  flex-grow: 1;\n  flex-basis: 0;\n  border-radius: 0 .3em .3em .3em;\n  border: 1px solid var(--borde-std);\n  /*height: 60vh;*/\n  background-color: var(--back-claro);\n  display: flex; }\n  #clients .client {\n    animation: tr .2s ease-in-out;\n    padding: .7em;\n    flex-grow: 1; }\n    #clients .client.disabled {\n      display: none; }\n    #clients .client#clientJ {\n      padding: 0; }\n\nbk-wc-ui-tree {\n  height: 100%;\n  font-size: .9em; }\n\n#clientB {\n  display: flex;\n  flex-direction: column; }\n  #clientB .selectNiveles {\n    max-height: 50%;\n    display: flex;\n    flex-direction: column; }\n    #clientB .selectNiveles.oculto .capNiveles span {\n      transform: rotate(90deg); }\n    #clientB .selectNiveles.oculto nav.mostrar {\n      visibility: hidden; }\n    #clientB .selectNiveles.oculto nav.criterios {\n      visibility: visible; }\n    #clientB .selectNiveles.oculto .niveles, #clientB .selectNiveles.oculto .query {\n      padding: 0;\n      height: 0; }\n  #clientB > div {\n    border: 1px solid var(--borde-std); }\n    #clientB > div + div {\n      margin-top: 1em;\n      overflow: auto;\n      flex-grow: 1;\n      flex-basis: 0; }\n  #clientB .capNiveles {\n    padding: .5em;\n    position: relative; }\n    #clientB .capNiveles span {\n      transform: rotate(0);\n      transition: transform .2s ease-in, opacity .3s ease;\n      position: absolute;\n      top: 0.9em;\n      right: 0.3em;\n      width: 0;\n      height: 0;\n      border-left: .4em solid transparent;\n      border-right: .4em solid transparent;\n      border-top: .4em solid #888;\n      display: block;\n      cursor: pointer; }\n      #clientB .capNiveles span:hover {\n        opacity: 0.6; }\n    #clientB .capNiveles nav.criterios {\n      position: absolute;\n      top: 0.5em;\n      right: 3em;\n      visibility: hidden; }\n  #clientB .niveles, #clientB .query {\n    overflow: hidden;\n    transition: height .3s ease;\n    /*transition: opacity .3s ease, height .3s ease .3s, padding .3s ease .3s;*/\n    /*transition-property: opacity, height, padding;\r\n        transition-duration: .3s, .3s .3s;\r\n        transition-delay: 0s, .3s, .3s;\r\n        transition-timing-function: ease-out;*/ }\n  #clientB .niveles {\n    flex-grow: 1;\n    display: flex;\n    flex-direction: column;\n    flex-wrap: wrap; }\n  #clientB .query {\n    display: flex;\n    align-items: center;\n    padding: 1.1em; }\n    #clientB .query span {\n      padding: .7em 0;\n      margin-right: .3em; }\n    #clientB .query input {\n      font: inherit;\n      color: inherit;\n      border-radius: .2em;\n      margin-right: .7em;\n      border: 1px solid var(--borde-std);\n      outline-color: var(--color-caret); }\n      #clientB .query input#filterCentro {\n        width: 6em; }\n      #clientB .query input#filterDesc {\n        flex-grow: 1; }\n\n.ni {\n  /*max-width: 25%;*/\n  padding: .3em .4em;\n  display: inline-block;\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  cursor: pointer; }\n  .ni input {\n    margin-right: .2em; }\n  .ni > div {\n    display: inline;\n    font-size: .8em;\n    vertical-align: text-top; }\n    .ni > div b {\n      font-weight: bold; }\n\n.resultados {\n  transition: height .3s ease; }\n\n.result {\n  display: flex;\n  margin-bottom: 1px;\n  animation: tr .2s ease-in-out;\n  transition: background-color .2s ease-in-out;\n  cursor: pointer; }\n  .result.selected > div {\n    background-color: var(--color-caret); }\n  .result > div {\n    padding: .2em .7em;\n    border-top: 1px solid #fafafa;\n    background-color: var(--back-claro);\n    /*border-right: 1px solid var(--borde-std);*/ }\n  .result div:nth-child(1) {\n    min-width: 3em; }\n  .result div:nth-child(2) {\n    min-width: 7em; }\n  .result div:nth-child(3) {\n    flex-grow: 1; }\n\n@keyframes tr {\n  0% {\n    opacity: 0; }\n  100% {\n    opacity: 1; } }\n",""])},function(e,t){e.exports="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4KPCEtLSBHZW5lcmF0b3I6IEFkb2JlIElsbHVzdHJhdG9yIDE5LjEuMCwgU1ZHIEV4cG9ydCBQbHVnLUluIC4gU1ZHIFZlcnNpb246IDYuMDAgQnVpbGQgMCkgIC0tPgo8c3ZnIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgeD0iMHB4IiB5PSIwcHgiIHdpZHRoPSIyNHB4IgoJIGhlaWdodD0iMjRweCIgdmlld0JveD0iMCAwIDI0IDI0IiBlbmFibGUtYmFja2dyb3VuZD0ibmV3IDAgMCAyNCAyNCIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSI+CjxnIGlkPSJCb3VuZGluZ19Cb3hlcyI+Cgk8ZyBpZD0idWlfeDVGX3NwZWNfeDVGX2hlYWRlcl9jb3B5XzMiIGRpc3BsYXk9Im5vbmUiPgoJPC9nPgoJPHBhdGggZmlsbD0ibm9uZSIgZD0iTTAsMGgyNHYyNEgwVjB6Ii8+CjwvZz4KPGcgaWQ9IlJvdW5kZWRfMV8iPgoJPGcgaWQ9InVpX3g1Rl9zcGVjX3g1Rl9oZWFkZXJfY29weV82IiBkaXNwbGF5PSJub25lIj4KCTwvZz4KCTxwYXRoIGQ9Ik0xOCwxM0g2Yy0wLjU1LDAtMS0wLjQ1LTEtMXYwYzAtMC41NSwwLjQ1LTEsMS0xaDEyYzAuNTUsMCwxLDAuNDUsMSwxdjBDMTksMTIuNTUsMTguNTUsMTMsMTgsMTN6Ii8+CjwvZz4KPC9zdmc+Cg=="},function(e,t){e.exports="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4KPCEtLSBHZW5lcmF0b3I6IEFkb2JlIElsbHVzdHJhdG9yIDE5LjEuMCwgU1ZHIEV4cG9ydCBQbHVnLUluIC4gU1ZHIFZlcnNpb246IDYuMDAgQnVpbGQgMCkgIC0tPgo8c3ZnIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgeD0iMHB4IiB5PSIwcHgiIHdpZHRoPSIyNHB4IgoJIGhlaWdodD0iMjRweCIgdmlld0JveD0iMCAwIDI0IDI0IiBlbmFibGUtYmFja2dyb3VuZD0ibmV3IDAgMCAyNCAyNCIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSI+CjxnIGlkPSJCb3VuZGluZ19Cb3hlcyIgZGlzcGxheT0ibm9uZSI+Cgk8cGF0aCBkaXNwbGF5PSJpbmxpbmUiIGZpbGw9Im5vbmUiIGQ9Ik0wLDBoMjR2MjRIMFYweiIvPgo8L2c+CjxnIGlkPSJSb3VuZGVkIj4KCTxjaXJjbGUgY3g9IjEyIiBjeT0iMTIiIHI9IjgiLz4KPC9nPgo8L3N2Zz4K"},function(e,t){e.exports="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4KPCEtLSBHZW5lcmF0b3I6IEFkb2JlIElsbHVzdHJhdG9yIDE5LjEuMCwgU1ZHIEV4cG9ydCBQbHVnLUluIC4gU1ZHIFZlcnNpb246IDYuMDAgQnVpbGQgMCkgIC0tPgo8c3ZnIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgeD0iMHB4IiB5PSIwcHgiIHdpZHRoPSIyNHB4IgoJIGhlaWdodD0iMjRweCIgdmlld0JveD0iMCAwIDI0IDI0IiBlbmFibGUtYmFja2dyb3VuZD0ibmV3IDAgMCAyNCAyNCIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSI+CjxnIGlkPSJCb3VuZGluZ19Cb3hlcyI+Cgk8ZyBpZD0idWlfeDVGX3NwZWNfeDVGX2hlYWRlcl9jb3B5XzMiIGRpc3BsYXk9Im5vbmUiPgoJPC9nPgoJPHBhdGggZmlsbD0ibm9uZSIgZD0iTTAsMGgyNHYyNEgwVjB6Ii8+CjwvZz4KPGcgaWQ9IlJvdW5kZWRfMV8iPgoJPGcgaWQ9InVpX3g1Rl9zcGVjX3g1Rl9oZWFkZXJfY29weV82IiBkaXNwbGF5PSJub25lIj4KCTwvZz4KCTxwYXRoIGQ9Ik0xOCwxM2gtNXY1YzAsMC41NS0wLjQ1LDEtMSwxaDBjLTAuNTUsMC0xLTAuNDUtMS0xdi01SDZjLTAuNTUsMC0xLTAuNDUtMS0xdjBjMC0wLjU1LDAuNDUtMSwxLTFoNVY2YzAtMC41NSwwLjQ1LTEsMS0xaDAKCQljMC41NSwwLDEsMC40NSwxLDF2NWg1YzAuNTUsMCwxLDAuNDUsMSwxdjBDMTksMTIuNTUsMTguNTUsMTMsMTgsMTN6Ii8+CjwvZz4KPC9zdmc+Cg=="},function(e,t){e.exports="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA1MTIgNTEyIj48cGF0aCBmaWxsPSIjNTM1MzUzIiBkPSJNNDExIDI5M0gyNjJjLTE2IDAtMjIgMTEtMTIgMjRsMjcgNDBjLTY3IDU3LTEzOCA3MC0xOTcgMzIgNDMgNzUgMTQ2IDEwMSAyNTAgNDBsMzAgNDBjOCAxMyAyMiAxMSAyNy01bDQ3LTE0OWMxLTgtNy0yMi0yMy0yMnptLTE5MCA1NGMtMTEtMTYtMTMtMzUtNS01MSAxMy0yNyAyNy0zMCA1NC0zMGgyOFYxMzBjMC0xNi0xMi0yOC0yOC0yOEg4MmMtMTYgMC0yOCAxMi0yOCAyOHYxODhjMCAxNiAxMiAyOCAyOCAyOGgxMzl6bS0zMi0xODloNTR2MjhoLTU0em0wIDU1aDU0djI3aC01NHptLTgyLTU1aDU1djI4aC01NXptMCA1NWg1NXYyN2gtNTV6TTQzMi0zMkgyNDNjLTE2IDAtMjcgMTEtMjcgMjd2ODJoNTRjMzEgMCA1NSAyNCA1NSA1NHYxMzZoMTA5YzE2IDAgMjctMTEgMjctMjdWLTNjLTItMTUtMTMtMjktMjktMjl6TTMyNSA1MGgtNTVWMjJoNTV6bTI3LTI4aDU0djI4aC01NHptNTMgMTM2aC01NXYtMjdoNTV6bTAtNTRoLTU1Vjc3aDU1eiIvPjwvc3ZnPg=="},function(e,t){e.exports="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA1MTIgNTEyIj48cGF0aCBmaWxsPSIjYzRkNjAwIiBkPSJNMjY3IDQyNWM1MC04OSAxMzgtMjM5IDIyNC0zMTcgMTgtMjQtNzEtMTE2LTkzLTkzLTIzIDIyLTEyMyAxNTYtMTg3IDI2MC0zNS00Ni04Ni05NS0xMTEtMTExLTMxLTIwLTEwMyA2OS03NSA5MyAzMCAyNSA4NSA4MSAxMzEgMTY4IDEzIDE1IDEwMiAxNyAxMTEgMHoiLz48L3N2Zz4="},function(e,t){e.exports="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA1MTIgNTEyIj48cGF0aCBmaWxsPSIjYWExMTEwIiBkPSJNMzk4IDMwNGwtODEtODggNzItNzJjMTYtMTYgMTYtNDIgMC02Mi0xNi0xNi00Mi0xNi01NiAwbC03MiA3Mi03Mi03N2MtMTYtMTYtNDItMTYtNTYgMC0xNiAxNi0xNiA0MSAwIDYybDcyIDc3LTg4IDg4Yy0xNiAxNi0xNiA0MiAwIDYyIDE2IDE2IDQxIDE2IDU2IDBsODgtODggODEgODhjMTYgMTYgNDIgMTYgNTYgMCAxNS0yMCAxNS00NiAwLTYyeiIvPjwvc3ZnPg=="},function(e,t,n){"use strict";n.r(t);var i=n(3),s=n.n(i),r=n(4),o=n.n(r);function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},i=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),i.forEach(function(t){l(e,t,n[t])})}return e}function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const c=document.createElement("template");function d(e,t){return e.closest(t)==e}c.innerHTML="<div class='node'>\n                            <div class='caption'><span class='icon'></span><div class='text'></div></div>\n                            <div class='hijos'></div>\n                          </div>";class u extends HTMLElement{constructor(){super();const e=this.attachShadow({mode:"open"});e.innerHTML="<style>"+o.a+"</style>"+s.a,this._client=e.querySelector("#client"),this._click=this._click.bind(this),this._selected=void 0}connectedCallback(){this._client.addEventListener("click",this._click)}disconnectedCallback(){this._client.removeEventListener("click",this._click),this._selected=void 0}_select(e){this._selected&&this._selected.classList.remove("sel"),e.classList.add("sel"),this._selected=e}_unselect(){this._selected&&this._selected.classList.remove("sel"),this._selected=void 0}_click(e){const t=e.composedPath()[0],n=t.closest(".node");d(t,".text")?(this._select(t),this.dispatchEvent(new CustomEvent("bk-change",{detail:this.selected,bubbles:!0}))):d(t,".icon")&&this._expandOrCollapse(n)}_expandOrCollapse(e){if(!d(e,".terminal"))if(d(e,".collapsed")){if(0==e.querySelector(".hijos").childElementCount){const t=this._bd[e.id].hijos;this._append(e.querySelector(".hijos"),t)}e.classList.remove("collapsed")}else e.classList.add("collapsed")}_expand(e){const t=this._client.querySelector(`[id='${e}']`);if(0==t.querySelector(".hijos").childElementCount){const e=this._bd[t.id].hijos;this._append(t.querySelector(".hijos"),e)}t.classList.remove("collapsed")}get selected(){if(this._selected){const e=this._selected.closest(".node").id;return a({},this._bd[e])}}set selectedId(e){if(!e)return void this._unselect();if(!this._bd[e])throw new Error("nodo no existe, "+e);this._getRutaNodo(e).forEach(e=>{this._expand(e.id)});const t=this._client.querySelector(`[id='${e}']`);this._select(t.querySelector(".text")),this._client.scrollTop=function(e,t){
//!!padre debe ser posicionado!!!
let n=e,i=n.offsetTop;for(;n.offsetParent&&n.offsetParent!=t;)i+=(n=n.offsetParent).offsetTop;return i}(t,this._client)}get data(){return this._data}set data(e){this._data!==e&&(this._data=e,this._bd={},this._data.forEach(e=>this._bd[e.id]=a({},e,{hijos:[]})),Object.entries(this._bd).forEach(([e,t])=>t.padre&&this._bd[t.padre].hijos.push(e)),this._paintInicial())}_getRutaNodo(e){const t=[];let n=this._bd[e].padre;for(;n;)t.unshift(this._bd[n]),n=this._bd[n].padre;return t}_paintInicial(){this._client.innerHTML="";const e=this._data.filter(e=>null==e.padre).map(e=>e.id);this._append(this._client,e,!0)}_append(e,t,n){t.forEach((t,i)=>{const s=this._bd[t],r=c.content.cloneNode(!0);r.querySelector(".text").innerText=s.text;const o=r.querySelector(".node");o.id=t,n&&o.classList.add("raiz"),0==s.hijos.length?(o.classList.add("terminal"),o.setAttribute("nivel",n?"0":(Number(e.closest(".node").getAttribute("nivel"))+1).toString())):(o.classList.add("collapsed"),o.setAttribute("nivel",n?"0":(Number(e.closest(".node").getAttribute("nivel"))+1).toString())),0==i&&o.classList.add("ph"),e.appendChild(r),this._fixLines(o)})}_ancestro_nivel_i_es_ultimo(e,t){let n=t;for(;Number(n.getAttribute("nivel"))>e;)n=n.parentElement.closest(".node");if(n===t)return!1;const i=n.parentElement.closest(".node").id;return this._bd[i].hijos.indexOf(n.id)==this._bd[i].hijos.length-1}_fixLines(e){for(let t=Number(e.getAttribute("nivel"));t>0;t--)this._ancestro_nivel_i_es_ultimo(t,e)||this._fix(t,e)}_fix(e,t){const n=Number(t.getAttribute("nivel")),i=document.createElement("span");i.style.left=`-${1.4*(n-e)+.9}em`,n==e&&d(t,".ph")&&i.classList.add("ph"),t.appendChild(i)}}var h=n(5),p=n.n(h),b=n(6),g=n.n(b);class v extends HTMLElement{constructor(){super();const e=this.attachShadow({mode:"open"});e.innerHTML="<style>"+g.a+"</style>"+p.a,this._popup=e.querySelector("#popup"),this._client=e.querySelector("#client"),this._click=this._click.bind(this),this.close=this.close.bind(this),this._endtransition=this._endtransition.bind(this),this._closing=!1}connectedCallback(){this._popup.addEventListener("click",this._click)}disconnectedCallback(){this._popup.removeEventListener("click",this._click)}_click(e){e.composedPath()[0]==this._popup&&this.close()}_endtransition(){try{this.parentNode&&this.parentNode.removeChild(this)}catch(e){}this._client.removeEventListener("transitionend",this._endtransition),this._client.removeEventListener("transitioncancel",this._endtransition)}close(){this._closing||(this._closing=!0,this.dispatchEvent(new CustomEvent("bk-close",{bubbles:!0})),this._client.style.transform="scale(0.1)",this._popup.style.opacity="0.1",this._client.addEventListener("transitionend",this._endtransition),this._client.addEventListener("transitioncancel",this._endtransition))}inject(e,t=""){this._css&&this.shadowRoot.removeChild(this._css),this._css=document.createElement("style"),this._css.type="text/css",this._css.appendChild(document.createTextNode(t)),this.shadowRoot.appendChild(this._css),this._markup&&this._markup.dispatchEvent(new CustomEvent("bk-clean",{bubbles:!0})),this._markup=e,this._client.innerHTML="",this._client.appendChild(e)}}function m(e){const t=()=>{e.dispatchEvent(new CustomEvent("bk-clean",{bubbles:!0})),n.removeEventListener("bk-close",t)},n=document.createElement("bk-wc-ui-modal");return n.addEventListener("bk-close",t),n.appendChild(e),document.body.appendChild(n),n.close}function y(e,t){const n=()=>{e.dispatchEvent(new CustomEvent("bk-clean",{bubbles:!0})),i.removeEventListener("bk-close",n)},i=document.createElement("bk-wc-ui-modal");return i.addEventListener("bk-close",n),i.style.top="-1500px",e&&i.inject(e,t),document.body.appendChild(i),i.close}var M=n(7),f=n.n(M),I=n(8),k=n.n(I);const x=(e,t)=>{let n=new Headers;return n.append("Accept","application/json"),n.append("Content-Type","application/json;charset=UTF-8"),n.append("x-j_gid_cod_app","e2"),fetch(e,{credentials:"same-origin",method:"post",body:JSON.stringify(t),headers:n}).then(t=>{if(t.ok){const n=t.headers.get("content-type");return n&&n.indexOf("application/json")>=0?t.json():(console.warn(`${e} devolvió content-type: ${n}`),t.text())}throw new Error(`Error haciendo post de ${e}, ${t.status}`)})},N={};let _=void 0;const C=e=>new Promise((t,n)=>{N[e]?N[e].then(e=>t(e),t=>{console.log(t),n(t),N[e]=void 0}):(N[e]=x("/tabit/ObtenerDatosJerarquiaCentrosAnalitica",{codigo:e}),N[e].then(e=>t(e),n=>{console.log(n),t([]),N[e]=void 0}))}),L=()=>new Promise((e,t)=>{_?e(_):x("/tabit/ObtenerTipoNivelJerarquiaAnalitica",{}).then(t=>{_=t,e(t)},t=>{console.log(t),_=void 0,e([])})});var w=n(9),E=n.n(w),T=n(10),D=n.n(T);function S(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const j=document.createElement("template");j.innerHTML="<div class='ni'>\n                            <input type='checkbox' checked/>\n                            <div></div>\n                          </div>";const A=document.createElement("template");A.innerHTML="<div class='result'>\n                            <div></div>\n                            <div></div>\n                            <div></div>\n                        </div>";class z{constructor(e,t,n,i,s){this.modelo=e,this.niveles=t,this.cb=n,this.cuspide=i,this.nivelesIndex=s,this.div=void 0,this.tabJerarquia=void 0,this.tabBusqueda=void 0,this.clientJ=void 0,this.clientB=void 0,this.tree=void 0,this._cerrar=void 0,this.panelNiveles=void 0,this.toggle=void 0,this.selectNiveles=void 0,this.clickJerarquia=this.clickJerarquia.bind(this),this.clickBusqueda=this.clickBusqueda.bind(this),this.handleToggle=this.handleToggle.bind(this),this.clickNiveles=this.clickNiveles.bind(this),this.querykeyup=this.querykeyup.bind(this),this.clean=this.clean.bind(this),this.query=void 0,this.filter=this.filter.bind(this),this.clickResult=this.clickResult.bind(this),this.result=void 0,this.selected=void 0,this.treeChanged=this.treeChanged.bind(this),this.aceptar=void 0,this.clickAceptar=this.clickAceptar.bind(this)}clickAceptar(){let e=this.selected;"string"!=typeof this.selected&&(e=this.selected.centro),this.cb(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},i=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),i.forEach(function(t){S(e,t,n[t])})}return e}({},this.modelo.find(t=>t.id==e).payload)),this._cerrar()}treeChanged(e){this.asignSelected(e.detail.id),this.result.querySelectorAll(".result.selected").forEach(e=>e.classList.remove("selected"))}asignSelected(e){this.selected=e,this.aceptar.disabled=!this.selected}clickResult(e){const t=function(e){return e.composedPath()[0].closest("div.result")}(e);t&&(this.selected&&this.selected.classList.remove("selected"),this.asignSelected(t),this.selected.classList.add("selected"))}filter(){this.asignSelected(void 0);const e=[];this.panelNiveles.querySelectorAll("input:checked").forEach(t=>{"ALL"!==t.codigo&&e.push(t.codigo.trim())});const t=this.query.querySelector("#filterCentro").value,n=this.query.querySelector("#filterDesc").value,i=this.modelo.filter(({payload:i})=>{if(e.includes(i.IDNIVEL.trim())&&(t.trim()&&i.IDCENTRO.includes(t.trim())||n.trim()&&i.NOMBRECENTRO.toLowerCase().includes(n.trim().toLowerCase())))return!0});this.result.innerHTML="";const s=document.createDocumentFragment();i.forEach(({payload:e})=>{const t=A.content.cloneNode(!0);t.querySelector(".result").centro=e.IDCENTRO,t.querySelector("div div:nth-child(1)").innerText=this.nivelesIndex[e.IDNIVEL].ABREVIATURA,t.querySelector("div div:nth-child(2)").innerText=e.IDCENTRO,t.querySelector("div div:nth-child(3)").innerText=e.NOMBRECENTRO,s.appendChild(t)}),this.result.appendChild(s)}querykeyup(e){this.setStateFilters()}handleToggle(e){this.selectNiveles.classList.toggle("oculto")}clickNiveles(e){const[t,n]=function(e){const t=e.composedPath()[0].closest("div.ni");if(t&&t.querySelector("input"))return[t.querySelector("input"),e.composedPath()[0]==t.querySelector("input")]}(e);t&&(t.checked=n?t.checked:!t.checked,"ALL"==t.codigo.trim()&&this.panelNiveles.querySelectorAll("input").forEach(e=>{e.checked=t.checked}),this.setStateFilters())}setStateFilters(){const e=this.panelNiveles.querySelectorAll("input:checked"),t=this.query.querySelector("#filterCentro"),n=this.query.querySelector("#filterDesc"),i=this.query.querySelector("#filtrar");e.length>1||1==e.length&&"ALL"!=e[0].codigo?(t.disabled=!1,n.disabled=!1,i.disabled=!(t.value.length>1||n.value.length>3)):(t.disabled=!0,n.disabled=!0,i.disabled=!0)}view(){this.div=document.createElement("div");const e=this.div.attachShadow({mode:"open"});e.innerHTML="<style>"+D.a+"</style>"+E.a,e.querySelector(".empresa").innerText=this.cuspide.payload.DESCRIPCIONEMPRESA,e.querySelector(".centro").innerText=this.cuspide.payload.IDCENTRO,e.querySelector(".desc").innerText=this.cuspide.payload.NOMBRECENTRO,this.tabJerarquia=e.querySelector(".tab.jerarquia"),this.tabJerarquia.addEventListener("click",this.clickJerarquia),this.tabBusqueda=e.querySelector(".tab.busqueda"),this.tabBusqueda.addEventListener("click",this.clickBusqueda),this.clientJ=e.querySelector("#clientJ"),this.clientB=e.querySelector("#clientB"),this.tree=e.querySelector("bk-wc-ui-tree"),this.tree.data=this.modelo,this.tree.addEventListener("bk-change",this.treeChanged),this._cerrar=m(this.div),e.querySelector(".aspa").addEventListener("click",this._cerrar),e.querySelector("button.abandonar").addEventListener("click",this._cerrar),this.panelNiveles=e.querySelector(".niveles"),this.toggle=e.querySelector(".capNiveles"),this.toggle.addEventListener("click",this.handleToggle),this.selectNiveles=e.querySelector(".selectNiveles"),this.panelNiveles.addEventListener("click",this.clickNiveles),this.rellenarNiveles(),this.query=e.querySelector(".query"),this.query.addEventListener("keyup",this.querykeyup),this.query.querySelector("#filtrar").addEventListener("click",this.filter),this.result=e.querySelector("#clientB #resultados"),this.result.addEventListener("click",this.clickResult),this.div.addEventListener("bk-clean",this.clean),this.aceptar=e.querySelector("button.aceptar"),this.aceptar.addEventListener("click",this.clickAceptar)}clean(){this.tabJerarquia.removeEventListener("click",this.clickJerarquia),this.tabBusqueda.removeEventListener("click",this.clickBusqueda),this.div.shadowRoot.querySelector(".aspa").removeEventListener("click",this._cerrar),this.div.shadowRoot.querySelector("button.abandonar").removeEventListener("click",this._cerrar),this.tree.removeEventListener("bk-change",this.treeChanged),this.toggle.removeEventListener("click",this.handleToggle),this.panelNiveles.removeEventListener("click",this.clickNiveles),this.query.removeEventListener("keyup",this.querykeypress),this.query.querySelector("#filtrar").removeEventListener("click",this.filter),this.result.removeEventListener("click",this.clickResult),this.div.removeEventListener("bk-clean",this.clean),this.aceptar.removeEventListener("click",this.clickAceptar)}clickJerarquia(){this.tabJerarquia.classList.contains("disabled")&&(this.tabJerarquia.classList.remove("disabled"),this.tabBusqueda.classList.add("disabled"),this.clientJ.classList.remove("disabled"),this.clientB.classList.add("disabled"),this.tree.selectedId=this.selected?this.selected.centro:void 0)}clickBusqueda(){this.tabBusqueda.classList.contains("disabled")&&(this.tabBusqueda.classList.remove("disabled"),this.tabJerarquia.classList.add("disabled"),this.clientB.classList.remove("disabled"),this.clientJ.classList.add("disabled"),this.tree.selectedId=void 0,"string"==typeof this.selected&&this.asignSelected(void 0))}rellenarNiveles(){const e=this.panelNiveles;this.niveles.forEach(t=>{const n=j.content.cloneNode(!0),i=n.querySelector("input");i.codigo=t.CODIGO,i.abreviatura=t.ABREVIATURA,n.querySelector(".ni div").innerHTML=`<span><b>${t.ABREVIATURA}</b>-${t.DESCRIPCION}</span>`,e.appendChild(n)})}}const B=5;function Z(e,t){for(;e.length<t;)e="0"+e;return e}function P(e,t){return e.closest(t)==e}class O extends HTMLElement{static get observedAttributes(){return["disabled","centro","cuspide"]}constructor(){super();const e=this.attachShadow({mode:"open"});e.innerHTML="<style>"+k.a+"</style>"+f.a,this._input=e.querySelector("input"),this._button=e.querySelector("button"),this._keypress=this._keypress.bind(this),this._keydown=this._keydown.bind(this),this._blur=this._blur.bind(this),this._clickInput=this._clickInput.bind(this),this._animationend=this._animationend.bind(this),this._updateCenter=this._updateCenter.bind(this),this._blurButton=this._blurButton.bind(this),this._returnModal=this._returnModal.bind(this),this._ready=!1,this._model=[],this._modelIndex={},this._niveles=[],this._nivelesIndex={}}_getModel(e){this._ready=!1,this.disabled=!0,Promise.all([C(e),L()]).then(([t,n])=>{this._ready=!0,this.disabled=!1,this._niveles=[{CODIGO:"ALL",ABREVIATURA:"ALL",DESCRIPCION:"Todos"},...n],this._nivelesIndex=this._niveles.reduce((e,t)=>(e[t.CODIGO]=t,e),{});const i=function(e,t,n){t=Z(t,B);const i={};return[e.map(e=>{const s={id:e.IDCENTRO,text:`${n[e.IDNIVEL].ABREVIATURA} - ${e.IDCENTRO} ${e.NOMBRECENTRO}`,padre:e.IDCENTRO==t?null:e["I DCENTROPADRE"],payload:e};return i[e.IDCENTRO]=s,s}),i]}(t,e,this._nivelesIndex);this._model=i[0],this._modelIndex=i[1],this._updateCenter()})}_upgradeProperty(e){if(this.hasOwnProperty(e)){let t=this[e];delete this[e],this[e]=t}}connectedCallback(){this._upgradeProperty("disabled"),this._upgradeProperty("centro"),this._upgradeProperty("cuspide"),this._input.addEventListener("keypress",this._keypress),this._input.addEventListener("keydown",this._keydown),this._input.addEventListener("blur",this._blur),this._input.addEventListener("click",this._clickInput),this._input.addEventListener("animationend",this._animationend),this._button.addEventListener("click",this._updateCenter),this._button.addEventListener("blur",this._blurButton)}disconnectedCallback(){this._input.removeEventListener("keypress",this._keypress),this._input.removeEventListener("keydown",this._keydown),this._input.removeEventListener("blur",this._blur),this._input.removeEventListener("click",this._clickInput),this._input.removeEventListener("animationend",this._animationend),this._button.removeEventListener("click",this._updateCenter),this._button.removeEventListener("blur",this._blurButton)}_keypress(e){13==e.which&&this._updateCenter()}_keydown(e){this._input.classList.remove("error"),27==e.keyCode&&(this._input.value=Z(this.centro,B))}_blur(e){e.relatedTarget&&P(e.relatedTarget,"button")||(this._input.classList.remove("error"),this._input.value=Z(this.centro,B))}_clickInput(e){this._input.select(),e.stopPropagation()}_animationend(e){this._input.classList.remove("animation-ok"),this._input.classList.remove("animation-err")}_blurButton(e){e.relatedTarget&&P(e.relatedTarget,"input")||(this._input.classList.remove("error"),this._input.value=Z(this.centro,B))}get disabled(){return this.hasAttribute("disabled")}set disabled(e){e?this.setAttribute("disabled",""):this.removeAttribute("disabled")}get centro(){return this.getAttribute("centro")}set centro(e){this.setAttribute("centro",Z(e,B))}get cuspide(){return this.getAttribute("cuspide")}set cuspide(e){this.setAttribute("cuspide",e)}attributeChangedCallback(e,t,n){t!==n&&("disabled"==e?this.disabled?(this._button.setAttribute("disabled",""),this._input.setAttribute("disabled","")):(this._button.removeAttribute("disabled"),this._input.removeAttribute("disabled")):"centro"==e?(this._input.value=n,this._updateCenter()):"cuspide"==e&&this._getModel(n))}_updateCenter(){this._ready&&(""!=this._input.value.trim()?(this._input.value=Z(this._input.value,B),this._modelIndex[this._input.value]?(this._input.classList.remove("error"),this._input.classList.add("animation-ok"),this._input.value!=this.centro&&(this.centro=this._input.value),this.dispatchEvent(new CustomEvent("bk-change",{detail:this._modelIndex[this.centro],bubbles:!0}))):(this._input.classList.add("error"),this._input.classList.add("animation-err"))):this._abrirModal())}_abrirModal(){this._modal=new z(this._model,this._niveles,this._returnModal,this._modelIndex[this.cuspide],this._nivelesIndex),this._modal.view()}_returnModal(e){this.centro=e.IDCENTRO}}n.d(t,"Tree",function(){return u}),n.d(t,"Modal",function(){return v}),n.d(t,"popup",function(){return m}),n.d(t,"popupi",function(){return y}),n.d(t,"BeanCentros",function(){return O}),window.customElements.define("bk-wc-ui-tree",u),window.customElements.define("bk-wc-ui-modal",v),window.customElements.define("bk-wc-ui-bean-centros",O)}])});
//# sourceMappingURL=index.min.js.map