!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e(require("swl")):"function"==typeof define&&define.amd?define("wcPredictivo",["swl"],e):"object"==typeof exports?exports.wcPredictivo=e(require("swl")):t.wcPredictivo=e(t.SWL)}(window,function(t){return function(t){var e={};function i(n){if(e[n])return e[n].exports;var o=e[n]={i:n,l:!1,exports:{}};return t[n].call(o.exports,o,o.exports,i),o.l=!0,o.exports}return i.m=t,i.c=e,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)i.d(n,o,function(e){return t[e]}.bind(null,o));return n},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=21)}([function(t,e){t.exports=function(t){return"string"!=typeof t?t:(/^['"].*['"]$/.test(t)&&(t=t.slice(1,-1)),/["'() \t\n]/.test(t)?'"'+t.replace(/"/g,'\\"').replace(/\n/g,"\\n")+'"':t)}},function(t,e){t.exports=function(t){var e=[];return e.toString=function(){return this.map(function(e){var i=function(t,e){var i=t[1]||"",n=t[3];if(!n)return i;if(e&&"function"==typeof btoa){var o=function(t){return"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(t))))+" */"}(n),r=n.sources.map(function(t){return"/*# sourceURL="+n.sourceRoot+t+" */"});return[i].concat(r).concat([o]).join("\n")}return[i].join("\n")}(e,t);return e[2]?"@media "+e[2]+"{"+i+"}":i}).join("")},e.i=function(t,i){"string"==typeof t&&(t=[[null,t,""]]);for(var n={},o=0;o<this.length;o++){var r=this[o][0];"number"==typeof r&&(n[r]=!0)}for(o=0;o<t.length;o++){var s=t[o];"number"==typeof s[0]&&n[s[0]]||(i&&!s[2]?s[2]=i:i&&(s[2]="("+s[2]+") and ("+i+")"),e.push(s))}},e}},function(t,e){t.exports="data:image/svg+xml;base64,PHN2ZyB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiCnZpZXdCb3g9IjAgMCA0MCA0MCIgZW5hYmxlLWJhY2tncm91bmQ9Im5ldyAwIDAgNDAgNDAiIHhtbDpzcGFjZT0icHJlc2VydmUiPgogIDxwYXRoIG9wYWNpdHk9IjAuMiIgZmlsbD0iIzAwMCIgZD0iTTIwLjIwMSw1LjE2OWMtOC4yNTQsMC0xNC45NDYsNi42OTItMTQuOTQ2LDE0Ljk0NmMwLDguMjU1LDYuNjkyLDE0Ljk0NiwxNC45NDYsMTQuOTQ2CiAgICBzMTQuOTQ2LTYuNjkxLDE0Ljk0Ni0xNC45NDZDMzUuMTQ2LDExLjg2MSwyOC40NTUsNS4xNjksMjAuMjAxLDUuMTY5eiBNMjAuMjAxLDMxLjc0OWMtNi40MjUsMC0xMS42MzQtNS4yMDgtMTEuNjM0LTExLjYzNAogICAgYzAtNi40MjUsNS4yMDktMTEuNjM0LDExLjYzNC0xMS42MzRjNi40MjUsMCwxMS42MzMsNS4yMDksMTEuNjMzLDExLjYzNEMzMS44MzQsMjYuNTQxLDI2LjYyNiwzMS43NDksMjAuMjAxLDMxLjc0OXoiLz4KICA8cGF0aCBmaWxsPSIjMDAwIiBkPSJNMjYuMDEzLDEwLjA0N2wxLjY1NC0yLjg2NmMtMi4xOTgtMS4yNzItNC43NDMtMi4wMTItNy40NjYtMi4wMTJoMHYzLjMxMmgwCiAgICBDMjIuMzIsOC40ODEsMjQuMzAxLDkuMDU3LDI2LjAxMywxMC4wNDd6Ij4KICAgIDxhbmltYXRlVHJhbnNmb3JtIGF0dHJpYnV0ZVR5cGU9InhtbCIKICAgICAgYXR0cmlidXRlTmFtZT0idHJhbnNmb3JtIgogICAgICB0eXBlPSJyb3RhdGUiCiAgICAgIGZyb209IjAgMjAgMjAiCiAgICAgIHRvPSIzNjAgMjAgMjAiCiAgICAgIGR1cj0iMC41cyIKICAgICAgcmVwZWF0Q291bnQ9ImluZGVmaW5pdGUiLz4KICAgIDwvcGF0aD4KICA8L3N2Zz4KCg=="},function(t,e){t.exports="<div id='client'>\r\n   <input type='text' placeholder=\"Nombre, DNI, dirección, tlf., oficina, cartera, ...\" spellcheck=\"false\"/>\r\n   <div class='manejador'></div>\r\n   <div class='progress'></div>\r\n   <div class='manejadorInterno'></div>\r\n</div>"},function(t,e,i){var n=i(0);(t.exports=i(1)(!1)).push([t.i,":host {\n  all: initial;\n  box-sizing: border-box;\n  font: inherit;\n  color: inherit;\n  line-height: 1.2;\n  display: inline-block;\n  width: 30em;\n  --borde-st-color: #c0c0c0; }\n\n* {\n  box-sizing: border-box; }\n\n#client {\n  display: flex;\n  position: relative; }\n  #client.progreso .progress {\n    display: block; }\n  #client input {\n    font: inherit;\n    color: inherit;\n    flex-grow: 1;\n    border: 1px solid var(--borde-st-color);\n    border-radius: .3em;\n    outline: none;\n    padding: .2em; }\n    #client input::-webkit-input-placeholder {\n      font-style: italic;\n      color: silver; }\n  #client .manejador {\n    flex-shrink: 0;\n    margin-left: .2em;\n    margin-top: .1em;\n    /*border: 1px solid var(--borde-st-color);\r\n        border-radius: 2px;\r\n        box-shadow: 1px 2px 2px #aaa;*/\n    border-radius: 2px;\n    width: 1.6em;\n    height: 1.6em;\n    background-image: url("+n(i(8))+");\n    background-repeat: no-repeat;\n    background-position: center;\n    background-size: 80%;\n    cursor: pointer;\n    transition: background-color .2s ease-in-out; }\n    #client .manejador:hover {\n      background-color: #bbbbbb; }\n  #client .progress {\n    display: none;\n    position: absolute;\n    top: .5em;\n    right: 3.6em;\n    padding: .4em;\n    background-image: url("+n(i(2))+");\n    background-repeat: no-repeat;\n    background-position: center; }\n  #client .manejadorInterno {\n    position: absolute;\n    top: .4em;\n    right: 2.3em;\n    width: 1em;\n    height: 1em;\n    background-image: url("+n(i(9))+");\n    background-repeat: no-repeat;\n    background-position: center; }\n    #client .manejadorInterno.activo {\n      top: .5em;\n      width: .75em;\n      height: .80em;\n      background-size: 90%;\n      background-image: url("+n(i(10))+");\n      background-color: #77736e;\n      border-radius: .8em;\n      cursor: pointer;\n      transition: background-color .2s ease-in-out; }\n      #client .manejadorInterno.activo:hover {\n        background-color: #478E9B; }\n",""])},function(e,i){e.exports=t},function(t,e){t.exports="<div class='client'>\r\n    <div class='cuerpo'>\r\n        <div class='filtros'>\r\n            <div class='head'>FILTROS SOBRE RESULTADOS</div>\r\n            <div class='ancla'><div class='reset'>Eliminar filtros</div></div>\r\n            <div class='filter'></div>\r\n        </div>\r\n        <div class='resultados'>\r\n            <div class='progress'></div>\r\n            <div class='titulo'>Se han encontrado <b class='num'></b> resultados para \"<b class='patron'></b>\"</div>\r\n            <div class='wall'>\r\n                <div class='wallCartera'>\r\n                    <div class='cap'>Mi cartera<div class='num'></div></div>\r\n                    <div class='children'></div>\r\n                </div>\r\n                <div class='wallOficina'>\r\n                    <div class='cap'>Mi oficina<div class='num'></div></div>\r\n                    <div class='children'></div>\r\n                </div>\r\n                <div class='wallOtros'>\r\n                    <div class='cap'>Otras oficinas<div class='num'></div></div>\r\n                    <div class='children'></div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n    <div class='pie'><button class='boton'>Abandonar</button></div>\r\n</div>"},function(t,e,i){var n=i(0);(t.exports=i(1)(!1)).push([t.i,'@charset "UTF-8";\n:host {\n  all: initial;\n  box-sizing: border-box;\n  font: inherit;\n  color: inherit;\n  line-height: 1.2;\n  position: fixed;\n  top: 0;\n  left: 0;\n  width: 100vw;\n  height: 100vh;\n  display: flex;\n  background-color: rgba(0, 0, 0, 0.3);\n  justify-content: center;\n  align-items: center;\n  animation: tr .3s ease-in-out;\n  transition: opacity .3s ease-in-out;\n  --back: #f1f1f1;\n  --front: #f6f6f6;\n  --border: 1px solid #dbdbdb; }\n\n* {\n  box-sizing: border-box; }\n\n.client {\n  padding: .7em;\n  background-color: var(--back);\n  border: var(--border);\n  border-radius: .3em;\n  width: 85vw;\n  height: 90vh;\n  display: flex;\n  flex-direction: column;\n  box-shadow: 4px 4px 3px 3px #888; }\n  .client .cuerpo {\n    flex-grow: 1;\n    display: flex; }\n  .client .pie {\n    flex-shrink: 0;\n    padding: .7em;\n    margin-top: 1em;\n    border-top: var(--border);\n    text-align: right; }\n\n@keyframes tr {\n  0% {\n    opacity: 0; }\n  100% {\n    opacity: 1; } }\n\n.filtros {\n  width: 20%;\n  flex-shrink: 0;\n  border: var(--border);\n  background-color: var(--front);\n  border-radius: 3px;\n  /*padding: .7em;*/ }\n\n.resultados {\n  flex-grow: 1;\n  margin-left: .7em;\n  display: flex;\n  flex-direction: column;\n  position: relative; }\n  .resultados > .progress {\n    display: none;\n    position: absolute;\n    bottom: 1em;\n    right: 2em;\n    padding: .6em;\n    background-image: url('+n(i(2))+");\n    background-repeat: no-repeat;\n    background-position: center; }\n    .resultados > .progress.visible {\n      display: block; }\n\n.titulo {\n  padding: .5em;\n  flex-shrink: 0; }\n\n.wall {\n  flex-grow: 1;\n  border: var(--border);\n  background-color: #fff;\n  border-radius: 3px;\n  overflow: auto; }\n  .wall::-webkit-scrollbar {\n    width: 9px; }\n  .wall::-webkit-scrollbar-track {\n    box-shadow: inset 0 0 6px rgba(0, 0, 0, 0.3);\n    border-radius: 10px; }\n  .wall::-webkit-scrollbar-thumb {\n    border-radius: 10px;\n    box-shadow: inset 0 0 6px rgba(0, 0, 0, 0.5); }\n  .wall > div:not(.progress) {\n    padding: .7em; }\n\n.boton {\n  font: inherit;\n  color: inherit;\n  outline: none;\n  padding: .2em .7em .2em 1.3em;\n  border-radius: 0.1em;\n  background-image: linear-gradient(#f9f9f9, #f1f1f1);\n  border: 1px solid #bdbdbd;\n  box-shadow: #787a74 0px 2px 1px -1px, white 0px 1px 0px 0px inset;\n  cursor: pointer;\n  transition: opacity 0.3s ease;\n  position: relative;\n  border-bottom: 2px solid #970302; }\n  .boton:hover {\n    opacity: .7;\n    background-image: linear-gradient(#a9a9a9, #e9e9e9); }\n  .boton::before {\n    content: '';\n    position: absolute;\n    top: 0.4em;\n    left: 0.2em;\n    padding: .9em 0 0 .9em;\n    background-size: cover;\n    background-repeat: no-repeat;\n    background-position: center;\n    background-image: url("+n(i(11))+"); }\n\n.cap {\n  font-size: 1.2em;\n  border-bottom: var(--border);\n  padding: .7em; }\n  .cap .num {\n    display: inline-block;\n    font-size: .8em;\n    padding: .2em .5em;\n    border-radius: 2px;\n    margin-left: 1em; }\n\n.wallCartera {\n  display: none; }\n  .wallCartera .cap {\n    color: #e48a04; }\n    .wallCartera .cap .num {\n      background-color: #e0d0bb; }\n  .wallCartera .children {\n    display: table;\n    width: 100%;\n    border-left: 5px solid #e48a04; }\n\n.wallOficina {\n  display: none; }\n  .wallOficina .cap {\n    color: #94a103; }\n    .wallOficina .cap .num {\n      background-color: #d2d4a4; }\n  .wallOficina .children {\n    display: table;\n    width: 100%;\n    border-left: 5px solid #94a103; }\n\n.wallOtros {\n  display: none; }\n  .wallOtros .cap {\n    color: #867e76; }\n    .wallOtros .cap .num {\n      background-color: #dacdc1; }\n  .wallOtros .children {\n    display: table;\n    width: 100%;\n    border-left: 5px solid #867e76; }\n\n.row {\n  display: table-row;\n  cursor: pointer;\n  transition: background-color .2s ease-in-out; }\n  .row:hover {\n    background-color: #dbdbdb; }\n\n.celda {\n  display: table-cell;\n  border-bottom: var(--border);\n  padding: .5em; }\n\nb {\n  color: black; }\n\n.filtros {\n  text-align: center;\n  display: flex;\n  flex-direction: column; }\n  .filtros .head {\n    flex-shrink: 0;\n    align-self: center;\n    font-size: 1.1em;\n    display: inline-block;\n    padding-left: 1.5em;\n    margin: .7em 0;\n    background-image: url("+n(i(12))+");\n    background-repeat: no-repeat;\n    background-size: 1.4em;\n    background-position: center left;\n    position: relative; }\n    .filtros .head:hover::before {\n      text-align: justify;\n      content: 'El filtrado es un AND l\\F3gico de las secciones y un OR de los elementos de cada secci\\F3n. Se deshabilita el scroll infinito cuando se est\\E1   en modo filtro.';\n      position: absolute;\n      width: 20em;\n      border: var(--border);\n      box-shadow: 2px 3px 2px 2px #888;\n      border-radius: 2px;\n      background-color: white;\n      font-size: 12px;\n      padding: .7em .9em;\n      color: #2e3d2f;\n      z-index: 1;\n      animation: tr .3s ease-in-out; }\n  .filtros .ancla {\n    flex-shrink: 0;\n    margin: .7em 0;\n    text-align: right; }\n    .filtros .ancla .reset {\n      margin-right: .7em;\n      display: inline-block;\n      text-decoration: underline;\n      color: #018ec0;\n      cursor: pointer;\n      transition: color .3s ease-in-out; }\n      .filtros .ancla .reset:hover {\n        color: #666; }\n  .filtros .filter {\n    flex-grow: 1;\n    text-align: left;\n    padding: .7em; }\n    .filtros .filter .colapsable {\n      margin-bottom: .5em; }\n      .filtros .filter .colapsable .text {\n        position: relative;\n        border-radius: 3px;\n        padding: .7em 2em;\n        background-color: #e4e4e4;\n        transition: background-color .3s ease-in-out;\n        cursor: pointer; }\n        .filtros .filter .colapsable .text::after {\n          content: '';\n          transform: rotate(0);\n          transition: transform .2s ease-in;\n          position: absolute;\n          top: 1.1em;\n          left: 0.7em;\n          width: 0;\n          height: 0;\n          border-left: .3em solid transparent;\n          border-right: .3em solid transparent;\n          border-top: .3em solid #666;\n          display: block; }\n        .filtros .filter .colapsable .text:hover {\n          background-color: #d4d4d4; }\n      .filtros .filter .colapsable .children {\n        padding-left: 2em; }\n        .filtros .filter .colapsable .children label {\n          cursor: pointer;\n          margin: .2em 0;\n          display: inline-block; }\n          .filtros .filter .colapsable .children label span {\n            margin-left: .5em; }\n      .filtros .filter .colapsable.colapsado .text::after {\n        transform: rotate(-90deg); }\n      .filtros .filter .colapsable.colapsado .children {\n        display: none; }\n\n.filter {\n  overflow: auto; }\n  .filter::-webkit-scrollbar {\n    width: 9px; }\n  .filter::-webkit-scrollbar-track {\n    box-shadow: inset 0 0 6px rgba(0, 0, 0, 0.3);\n    border-radius: 10px; }\n  .filter::-webkit-scrollbar-thumb {\n    border-radius: 10px;\n    box-shadow: inset 0 0 6px rgba(0, 0, 0, 0.5); }\n",""])},function(t,e){t.exports="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4NCjwhLS0gR2VuZXJhdG9yOiBBZG9iZSBJbGx1c3RyYXRvciAyMi4wLjEsIFNWRyBFeHBvcnQgUGx1Zy1JbiAuIFNWRyBWZXJzaW9uOiA2LjAwIEJ1aWxkIDApICAtLT4NCjxzdmcgdmVyc2lvbj0iMS4xIiBpZD0iTGF5ZXJfMl8xXyIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgeD0iMHB4IiB5PSIwcHgiDQoJIHZpZXdCb3g9IjAgMCAxNiAxNCIgc3R5bGU9ImVuYWJsZS1iYWNrZ3JvdW5kOm5ldyAwIDAgMTYgMTQ7IiB4bWw6c3BhY2U9InByZXNlcnZlIj4NCjxzdHlsZSB0eXBlPSJ0ZXh0L2NzcyI+DQoJLnN0MHtmaWxsOiM0NzhFOUI7fQ0KPC9zdHlsZT4NCjxwYXRoIGNsYXNzPSJzdDAiIGQ9Ik0xMS4yLDUuMmMtMi40LDAtNC40LDEuOS00LjQsNC40YzAsMi40LDEuOSw0LjQsNC40LDQuNHM0LjQtMS45LDQuNC00LjRTMTMuNiw1LjIsMTEuMiw1LjJ6IE0xMS43LDEwdjIuOWgtMQ0KCVYxMEg3LjhWOWgyLjlWNi4yaDF2Mi45aDIuOXYxaC0yLjlWMTB6Ii8+DQo8cGF0aCBjbGFzcz0ic3QwIiBkPSJNNS45LDkuNWMwLTAuNSwwLjItMSwwLjMtMS41QzUuOSw3LjksNS43LDcuOCw1LjQsNy42Yy0xLjItMS4yLTEuMi0zLjMsMC00LjVzMy4zLTEuMiw0LjUsMA0KCWMwLjQsMC40LDAuNiwwLjgsMC43LDEuM2MwLjIsMCwwLjMtMC4xLDAuNS0wLjFjMC41LDAsMC45LDAuMiwxLjMsMC4zYy0wLjItMS0wLjUtMS45LTEuMy0yLjdDOS4yLDAsNiwwLDQuMSwxLjkNCglDMi41LDMuNSwyLjMsNi4xLDMuNSw4LjFsLTMuMiwzLjJjLTAuNCwwLjQtMC40LDEsMCwxLjRzMSwwLjQsMS40LDBMNSw5LjVDNS4zLDkuNyw1LjcsOS44LDYsMTBDNiw5LjgsNS45LDkuNyw1LjksOS41eiIvPg0KPC9zdmc+DQo="},function(t,e){t.exports="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMyIgaGVpZ2h0PSIxMi45NjkiIHZpZXdCb3g9IjAgMCAxMyAxMi45NjkiPgogIDxtZXRhZGF0YT48P3hwYWNrZXQgYmVnaW49Iu+7vyIgaWQ9Ilc1TTBNcENlaGlIenJlU3pOVGN6a2M5ZCI/Pgo8eDp4bXBtZXRhIHhtbG5zOng9ImFkb2JlOm5zOm1ldGEvIiB4OnhtcHRrPSJBZG9iZSBYTVAgQ29yZSA1LjYtYzE0MCA3OS4xNjA0NTEsIDIwMTcvMDUvMDYtMDE6MDg6MjEgICAgICAgICI+CiAgIDxyZGY6UkRGIHhtbG5zOnJkZj0iaHR0cDovL3d3dy53My5vcmcvMTk5OS8wMi8yMi1yZGYtc3ludGF4LW5zIyI+CiAgICAgIDxyZGY6RGVzY3JpcHRpb24gcmRmOmFib3V0PSIiLz4KICAgPC9yZGY6UkRGPgo8L3g6eG1wbWV0YT4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgIAo8P3hwYWNrZXQgZW5kPSJ3Ij8+PC9tZXRhZGF0YT4KPGRlZnM+CiAgICA8c3R5bGU+CiAgICAgIC5jbHMtMSB7CiAgICAgICAgZmlsbDogIzU2NDkzYzsKICAgICAgICBmaWxsLXJ1bGU6IGV2ZW5vZGQ7CiAgICAgIH0KICAgIDwvc3R5bGU+CiAgPC9kZWZzPgogIDxwYXRoIGlkPSJidXNjYXJfY29waWEiIGRhdGEtbmFtZT0iYnVzY2FyIGNvcGlhIiBjbGFzcz0iY2xzLTEiIGQ9Ik0xNTE5LjQ4LDEyNS40ODdhNS4xMzUsNS4xMzUsMCwwLDAtNy45Miw2LjQ1OGwtMy4yOSwzLjI3MmExLjAyOSwxLjAyOSwwLDAsMCwxLjQ2LDEuNDUxbDMuMjgtMy4yNzJBNS4xMzUsNS4xMzUsMCwwLDAsMTUxOS40OCwxMjUuNDg3Wm0tMS4zLDUuOTYxYTMuMywzLjMsMCwxLDEsMC00LjY2NkEzLjMwNSwzLjMwNSwwLDAsMSwxNTE4LjE4LDEzMS40NDhaIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtMTUwOCAtMTI0KSIvPgo8L3N2Zz4K"},function(t,e){t.exports="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4KPCEtLSBHZW5lcmF0b3I6IEFkb2JlIElsbHVzdHJhdG9yIDE5LjEuMCwgU1ZHIEV4cG9ydCBQbHVnLUluIC4gU1ZHIFZlcnNpb246IDYuMDAgQnVpbGQgMCkgIC0tPgo8c3ZnIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgeD0iMHB4IiB5PSIwcHgiIHdpZHRoPSIyNHB4IgoJIGhlaWdodD0iMjRweCIgdmlld0JveD0iMCAwIDI0IDI0IiBlbmFibGUtYmFja2dyb3VuZD0ibmV3IDAgMCAyNCAyNCIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSI+CjxnIGlkPSJCb3VuZGluZ19Cb3hlcyI+Cgk8ZyBpZD0idWlfeDVGX3NwZWNfeDVGX2hlYWRlcl9jb3B5XzMiIGRpc3BsYXk9Im5vbmUiPgoJPC9nPgoJPHBhdGggZmlsbD0ibm9uZSIgZD0iTTAsMGgyNHYyNEgwVjB6Ii8+CjwvZz4KPGcgaWQ9IlJvdW5kZWRfMV8iPgoJPGcgaWQ9InVpX3g1Rl9zcGVjX3g1Rl9oZWFkZXJfY29weV82IiBkaXNwbGF5PSJub25lIj4KCTwvZz4KCTxwYXRoIGZpbGw9IndoaXRlIiBkPSJNMTguMyw1LjcxTDE4LjMsNS43MWMtMC4zOS0wLjM5LTEuMDItMC4zOS0xLjQxLDBMMTIsMTAuNTlMNy4xMSw1LjdjLTAuMzktMC4zOS0xLjAyLTAuMzktMS40MSwwbDAsMAoJCWMtMC4zOSwwLjM5LTAuMzksMS4wMiwwLDEuNDFMMTAuNTksMTJMNS43LDE2Ljg5Yy0wLjM5LDAuMzktMC4zOSwxLjAyLDAsMS40MWgwYzAuMzksMC4zOSwxLjAyLDAuMzksMS40MSwwTDEyLDEzLjQxbDQuODksNC44OQoJCWMwLjM5LDAuMzksMS4wMiwwLjM5LDEuNDEsMGwwLDBjMC4zOS0wLjM5LDAuMzktMS4wMiwwLTEuNDFMMTMuNDEsMTJsNC44OS00Ljg5QzE4LjY4LDYuNzMsMTguNjgsNi4wOSwxOC4zLDUuNzF6Ii8+CjwvZz4KPC9zdmc+Cg=="},function(t,e){t.exports="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgLTMyIDUxMiA1MTIiPjxwYXRoIGZpbGw9IiM2YjE0MTQiIGQ9Ik0zNzQgMjIybDEyOCAxMjhjMTMgMTUgMTIgMjkgMCA0MGwtNzggNzljLTggOC0yNyA5LTQwIDBMMjU2IDM0MSAxMjggNDY5Yy0xMyAxNC0yOSAxMy00MCAwbC03OC03OWMtOC04LTEwLTI3IDAtNDBsMTI4LTEyOEwxMCA5NGMtMTMtMTEtOC0zMiAwLTQwbDc4LTc4YzgtOCAyNC0xMyAzOCAwbDEyOCAxMjhMMzgyLTI0YzEyLTEzIDMyLTggNDAgMGw3OSA3OGM4IDggMTMgMjQgMCA0MHoiLz48L3N2Zz4="},function(t,e){t.exports="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgLTMyIDUxMiA1MTIiPjxwYXRoIGZpbGw9IiM2NjY2NjYiIGQ9Ik00OTQgMTlIMThsMTg3IDE4N3YxNzJsMTAyIDUxVjIwNnoiLz48L3N2Zz4="},function(t,e){t.exports="<div class='celda nombre'></div>\r\n<div class='celda documento'></div>\r\n<div class='celda edad'></div>\r\n<div class='celda telefono'></div>\r\n<div class='celda domicilio'></div>\r\n<div class='celda localidad'></div>\r\n<div class='celda codPostal'></div>"},function(t,e){t.exports="<div class='colapsable' id='cartera'>\r\n    <div class='text'>Cartera</div>\r\n    <div class='children'></div>\r\n</div>\r\n<div class='colapsable colapsado' id='oficina'>\r\n    <div class='text'>Oficina</div>\r\n    <div class='children'></div>\r\n</div>\r\n<div class='colapsable' id='tipoPersona'>\r\n    <div class='text'>Tipo persona</div>    \r\n    <div class='children'></div>\r\n</div>"},function(t,e){t.exports="<label><input class='fx' type=\"checkbox\"><span></span></label>"},function(t,e){t.exports=" <div class='celda documento'></div>\r\n <div class='celda nombre'></div>\r\n <div class='celda localidad'></div>\r\n <div class='celda domicilio'></div>\r\n"},function(t,e,i){var n=i(0);(t.exports=i(1)(!1)).push([t.i,":host {\n  all: initial;\n  box-sizing: border-box;\n  font: inherit;\n  color: inherit;\n  line-height: 1.2;\n  position: absolute;\n  display: flex;\n  flex-direction: column;\n  border: 1px solid #dbdbdb;\n  border-radius: .2em;\n  background-color: #ffffff; }\n\n* {\n  box-sizing: border-box; }\n\n.root {\n  overflow: auto;\n  flex-grow: 1;\n  min-width: 45vw; }\n  .root::-webkit-scrollbar {\n    width: 9px; }\n  .root::-webkit-scrollbar-track {\n    box-shadow: inset 0 0 6px rgba(0, 0, 0, 0.3);\n    border-radius: 10px; }\n  .root::-webkit-scrollbar-thumb {\n    border-radius: 10px;\n    box-shadow: inset 0 0 6px rgba(0, 0, 0, 0.5); }\n\n.cli {\n  display: table;\n  padding: .7em;\n  transition: opacity .15s ease-in-out; }\n\n.pie {\n  flex-shrink: 0;\n  background-color: #f7f7f7;\n  padding: .7em 1.5em;\n  position: relative;\n  /*font-size: 1.1em;*/ }\n  .pie p {\n    margin: 0;\n    text-decoration: underline;\n    color: #018ec0;\n    cursor: pointer;\n    transition: color .3s ease-in-out; }\n    .pie p:hover {\n      color: #666; }\n    .pie p b {\n      color: inherit; }\n  .pie .bloqueados {\n    display: none;\n    position: absolute;\n    top: .8em;\n    right: 1.2em;\n    padding-left: .9em;\n    color: #018ec0;\n    background-image: url("+n(i(18))+");\n    background-size: .7em;\n    background-position: left center;\n    background-repeat: no-repeat; }\n    .pie .bloqueados b {\n      color: inherit; }\n    .pie .bloqueados.visible {\n      display: block; }\n\n.cab {\n  flex-shrink: 0;\n  color: silver;\n  position: relative;\n  padding: .5em .7em 0 .7em; }\n\n.fila {\n  display: table-row;\n  cursor: pointer;\n  transition: background-color .2s ease-in-out; }\n  .fila:hover {\n    background-color: #dbdbdb; }\n\n.celda {\n  display: table-cell;\n  border-bottom: 1px solid #f0f0f0;\n  padding: .4em .9em; }\n\nb {\n  color: black; }\n\n.aspa {\n  position: absolute;\n  top: 0.5em;\n  right: 0.7em;\n  padding: 0.7em 0 0 0.7em;\n  background-image: url("+n(i(19))+");\n  background-size: cover;\n  background-repeat: no-repeat;\n  background-position: center;\n  cursor: pointer;\n  transition: background-color 0.3s ease;\n  border-radius: .7em;\n  border: 1px solid transparent; }\n  .aspa:hover {\n    background-color: #999;\n    border-color: #dbdbdb; }\n",""])},function(t,e){t.exports="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgLTMyIDUxMiA1MTIiPjxwYXRoIGZpbGw9IiM4ODg4ODgiIGQ9Ik00MzggNDNDMzkwLTUgMzI4LTMyIDI1OC0zMiAxMTUtMzIgMiA4MiAyIDIyNGMwIDcwIDI3IDEzNCA3NSAxODEgNDggNDggMTEwIDc1IDE4MSA3NSAxNDIgMCAyNTYtMTE0IDI1Ni0yNTYtMi03MC0yOS0xMzMtNzYtMTgxem0tMTgyLThjNDAgMCA3NSAxMSAxMDYgMzJMMTAyIDMyNmMtMTktMzItMzItNjctMzItMTA1LTMtOTkgODQtMTg2IDE4Ni0xODZ6bTAgMzc5Yy00MCAwLTc1LTExLTEwNi0zMmwyNjAtMjU5YzE5IDMyIDMyIDY3IDMyIDEwNiA0IDk3LTg0IDE4NS0xODYgMTg1eiIvPjwvc3ZnPg=="},function(t,e){t.exports="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4KPCEtLSBHZW5lcmF0b3I6IEFkb2JlIElsbHVzdHJhdG9yIDE5LjEuMCwgU1ZHIEV4cG9ydCBQbHVnLUluIC4gU1ZHIFZlcnNpb246IDYuMDAgQnVpbGQgMCkgIC0tPgo8c3ZnIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgeD0iMHB4IiB5PSIwcHgiIHdpZHRoPSIyNHB4IgoJIGhlaWdodD0iMjRweCIgdmlld0JveD0iMCAwIDI0IDI0IiBlbmFibGUtYmFja2dyb3VuZD0ibmV3IDAgMCAyNCAyNCIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSI+CjxnIGlkPSJCb3VuZGluZ19Cb3hlcyI+Cgk8ZyBpZD0idWlfeDVGX3NwZWNfeDVGX2hlYWRlcl9jb3B5XzMiIGRpc3BsYXk9Im5vbmUiPgoJPC9nPgoJPHBhdGggZmlsbD0ibm9uZSIgZD0iTTAsMGgyNHYyNEgwVjB6Ii8+CjwvZz4KPGcgaWQ9IlJvdW5kZWRfMV8iPgoJPGcgaWQ9InVpX3g1Rl9zcGVjX3g1Rl9oZWFkZXJfY29weV82IiBkaXNwbGF5PSJub25lIj4KCTwvZz4KCTxwYXRoIGQ9Ik0xOC4zLDUuNzFMMTguMyw1LjcxYy0wLjM5LTAuMzktMS4wMi0wLjM5LTEuNDEsMEwxMiwxMC41OUw3LjExLDUuN2MtMC4zOS0wLjM5LTEuMDItMC4zOS0xLjQxLDBsMCwwCgkJYy0wLjM5LDAuMzktMC4zOSwxLjAyLDAsMS40MUwxMC41OSwxMkw1LjcsMTYuODljLTAuMzksMC4zOS0wLjM5LDEuMDIsMCwxLjQxaDBjMC4zOSwwLjM5LDEuMDIsMC4zOSwxLjQxLDBMMTIsMTMuNDFsNC44OSw0Ljg5CgkJYzAuMzksMC4zOSwxLjAyLDAuMzksMS40MSwwbDAsMGMwLjM5LTAuMzksMC4zOS0xLjAyLDAtMS40MUwxMy40MSwxMmw0Ljg5LTQuODlDMTguNjgsNi43MywxOC42OCw2LjA5LDE4LjMsNS43MXoiLz4KPC9nPgo8L3N2Zz4K"},function(t,e){t.exports="<div class='cab'>Clientes sugeridos<div class='aspa'></div></div>\r\n<div class='root'>\r\n    <div class='cli'>...</div>\r\n</div>\r\n<div class='pie'>\r\n    <p class='verTodo'>Ver todos los resultados de \"<b></b>\" (<i></i>)</p>\r\n    <div class='bloqueados'><b>2</b> clientes ocultos</div>\r\n</div>"},function(t,e,i){"use strict";i.r(e);var n=i(3),o=i.n(n),r=i(4),s=i.n(r);function a(t){if(1!==t.nodeType)return!1;const e=window.getComputedStyle(t);return e.opacity<1||("none"!==e.transform||("preserve-3d"===e.transformStyle||("none"!==e.perspective||("none"!==e.flowFrom&&"normal"!==e.content||("fixed"===e.position||("static"!==e.position&&"auto"!==e.zIndex||"HTML"===t.tagName))))))}function l(t){return window.getComputedStyle(t).zIndex}function c(t=document.body){let e=0;return[...t.childNodes?t.childNodes:t.shadowRoot.childNodes].forEach(t=>{let i;(i=a(t)?function(t){const e=parseInt(l(t));return isNaN(e)?0:e}(t):c(t))>e&&(e=i)}),e}var g=i(5),d=i.n(g);const I=(t,e,i,n)=>{const o=`/buscemp/BuscempNeoPagedQuery?qtext=${n}&userId=${t}&oficina=${e}&entidad=${i}`;let r=0,s=void 0,a=void 0;function l(t){let e=0,i=void 0;return["cartera","oficina","otros"].forEach(n=>{if(!t[n])return;const o=t[n].docs.length;o>0&&(e=o,i=n)}),[e,i]}function c(t){return new Promise((e,i)=>{const n=new XMLHttpRequest;n.open("GET",t,!0),n.onload=function(t){200==this.status?e(JSON.parse(this.response)):i(["Error en la petición - cod: "+String(this.status),this.statusText])},n.onerror=function(t){i(["Error haciendo petición",t])},n.send()})}return{inicia:()=>c(o).then(t=>{a=t.query.queryId;const[e,i]=l(t.results);return r+=e,s=i,t.results}),siguiente:()=>c(o+`&queryId=${a}&start=${String(r)}&listapaginado=${s}`).then(t=>{a=t.query.queryId;const e=t.results,[i,n]=l(t.results);return s===n?r+=i:r=i,s=n,e})}},C=()=>{return new Promise((t,e)=>{d.a.proceso.open("NSBN1239",{origen:"bean",tipoBean:"beanNombre",abrirVistaPrincipal:"S"},!0).then(i=>{i.closePromise.then(function(e){t(e.closeData)},function(t){e(t)})},t=>{e(t)})})},A=t=>{return{base:{id:t.id?t.id:t.idCli,tipopersona:t.tipopersona?t.tipopersona:t.tipoPersona,documento:t.documento?t.documento:t.numDoc,tipodocumento:t.tipodocumento?t.tipodocumento:t.codTipoDoc,telefono:t.telefono,domicilio:t.domicilio,localidad:t.localidad?t.localidad:t.poblacion,codpostal:t.cpostal?t.cpostal:t.codPostal,nombre:t.titular?t.titular:t.nombre+(t.apellidos?" "+t.apellidos:""),fechanac:t.fechanac?t.fechanac:(t=>{try{const e=parseInt(t.substring(0,4),10),i=parseInt(t.substring(4,6),10),n=parseInt(t.substring(6,8),10);return new Date(e,i-1,n,0,0,0).toISOString()}catch(e){return t}})(t.fechaNac)},raw:t}};var u=(t,e,i)=>({xhr:void 0,getData:function(n){const o=`/buscemp/BuscempNeoQuery?qtext=${n}&userId=${t}&oficina=${e}&entidad=${i}`;return new Promise((t,e)=>{this.xhr&&this.xhr.abort(),this.xhr=new XMLHttpRequest,this.xhr.open("GET",o,!0),this.xhr.onload=function(i){200==this.status?t(JSON.parse(this.response)):e(["Error en la petición - cod: "+String(this.status),this.statusText])},this.xhr.onerror=function(t){e(["Error haciendo petición",t])},this.xhr.send()})}}),p=i(6),h=i.n(p),b=i(7),M=i.n(b);function f(t,e){return t.closest(e)==t}class m{constructor(t){this._search=t._raw.parameters.qtext[0],this._ref=t,this._capa=void 0,this._client=void 0,this._wall=void 0,this._progress=void 0,this._filtros=void 0,this._close=this._close.bind(this),this._scroll=this._scroll.bind(this),this._click=this._click.bind(this),this._clickFiltros=this._clickFiltros.bind(this),this._instancePaged=I(this._ref.user,this._ref.oficina,this._ref.entidad,this._search),this._cuentas={total:0},Object.keys(this._ref._raw.results).forEach(t=>{this._cuentas[t]=this._ref._raw.results[t].numFound,this._cuentas.total+=this._cuentas[t]}),this._registros=[],this._visibles={},this._statecol=void 0}_close(){this._client.querySelector(".pie .boton").removeEventListener("click",this._close),this._wall.removeEventListener("scroll",this._scroll),this._wall.removeEventListener("click",this._click),this._filtros.removeEventListener("click",this._clickFiltros),document.body.removeChild(this._capa)}_click(t){const e=t.composedPath()[0];if(!f(e,".celda")&&!f(e.parentNode,".celda"))return;const i=e.closest(".row").getAttribute("data-id"),n=this._registros.find(t=>t.id===i);this._ref.dispatchItem(n),this._close()}go(){this._capa=document.createElement("aside");const t=c();this._capa.style.zIndex=t?String(t):"auto";const e=this._capa.attachShadow({mode:"open"});e.innerHTML="<style>"+M.a+"</style>"+h.a,e.host.style.font=window.getComputedStyle(this._ref.shadowRoot.host).font,document.body.appendChild(this._capa),this._client=e.querySelector(".client"),this._progress=e.querySelector(".progress"),this._client.querySelector(".num").innerText=String(this._cuentas.total),this._client.querySelector(".patron").innerText=this._search,this._client.querySelector(".wallCartera .num").innerText=String(this._cuentas.cartera),this._client.querySelector(".wallOficina .num").innerText=String(this._cuentas.oficina),this._client.querySelector(".wallOtros .num").innerText=String(this._cuentas.otros),this._client.querySelector(".pie .boton").addEventListener("click",this._close),this._wall=this._client.querySelector(".wall"),this._wall.addEventListener("scroll",this._scroll),this._wall.addEventListener("click",this._click),this._progress.classList.add("visible"),this._filtros=this._client.querySelector(".filtros"),this._filtros.addEventListener("click",this._clickFiltros),this._instancePaged.inicia().then(t=>{this._progress.classList.remove("visible"),Object.keys(t).forEach(e=>{t[e].docs.forEach(t=>{this._registros.push(t),this._paint(t,e)})}),this._paintFiltros()}).catch(t=>{this._progress.classList.remove("visible"),console.log(t)})}_fill(t){return this._search.split(" ").forEach(e=>{t=t.replace(new RegExp("("+e+")","ig"),"<b>$1</b>")}),t}_paint(t,e){const n={documento:t.documento||"-",nombre:(t.nombre?t.nombre:"")+(t.apellidos?" "+t.apellidos:""),localidad:t.localidad?t.localidad:"-",domicilio:t.domicilio?t.domicilio:"-",codPostal:t.cpostal||"-",telefono:t.telefono||"-",edad:t.fechanac?function(t){const e=parseInt(t.split("-")[0]),i=(new Date).getFullYear()-e;return isNaN(i)?"-":String(i)+" años"}(t.fechanac):"-",id:t.id};let o=".wallCartera";"oficina"==e?o=".wallOficina":"otros"==e&&(o=".wallOtros"),this._visibles[o]||(this._visibles[o]=!0,this._client.querySelector(o).style.display="block");const r=document.createElement("div");r.classList.add("row"),r.innerHTML=i(13),r.querySelector(".nombre").innerHTML=this._fill(n.nombre),r.querySelector(".documento").innerHTML=this._fill(n.documento),r.querySelector(".edad").innerHTML=this._fill(n.edad),r.querySelector(".telefono").innerHTML=this._fill(n.telefono),r.querySelector(".domicilio").innerHTML=this._fill(n.domicilio),r.querySelector(".localidad").innerHTML=this._fill(n.localidad),r.querySelector(".codPostal").innerHTML=this._fill(n.codPostal),r.setAttribute("data-id",n.id),this._client.querySelector(o+" .children").appendChild(r)}_isFiltersActive(){return this._filtros.querySelectorAll("input[type=checkbox].fx:checked").length>0}_scroll(){!this._isFiltersActive()&&this._registros.length<this._cuentas.total&&this._wall.scrollTop+this._wall.clientHeight>=this._wall.scrollHeight&&(this._progress.classList.add("visible"),this._instancePaged.siguiente().then(t=>{this._progress.classList.remove("visible"),Object.keys(t).forEach(e=>{t[e].docs.forEach(t=>{this._registros.push(t),this._paint(t,e)})}),this._paintFiltros()}).catch(t=>{this._progress.classList.remove("visible"),console.log(t)}))}_doFilter(){this._wall.scrollTop=0;const t=[];if(this._filtros.querySelectorAll("input[type=checkbox].fx:checked").forEach(e=>{const i=e.closest("[data-seccion]"),n=i.getAttribute("data-seccion"),o=i.getAttribute("data-input");t.push({key:n,value:o})}),0==t.length)this._wall.querySelectorAll(".row[data-id]").forEach(t=>t.removeAttribute("style"));else{const e=this._registros.filter(e=>{let i=!t.some(t=>"oficina"===t.key),n=!t.some(t=>"cartera"===t.key),o=!t.some(t=>"tipoPersona"===t.key);return t.forEach(t=>{"oficina"===t.key&&e.oficina.indexOf(t.value)>=0?i=!0:"cartera"===t.key&&e.tipocartera_desc===t.value?n=!0:"tipoPersona"===t.key&&e.tipopersona_desc===t.value&&(o=!0)}),i&&n&&o}).map(t=>t.id);this._wall.querySelectorAll(".row[data-id]").forEach(t=>{e.includes(t.getAttribute("data-id"))?t.removeAttribute("style"):t.style.display="none"})}}_clickFiltros(t){const e=t.composedPath()[0];if(!f(e,".text"))return f(e,".reset")?(this._filtros.querySelectorAll("input[type=checkbox].fx").forEach(t=>{t.checked=!1}),void this._doFilter()):void(f(e,"input[type=checkbox].fx")&&this._doFilter());e.closest(".colapsable").classList.toggle("colapsado")}_backupState(){this._filtros.querySelector("#cartera")&&(this._statecol={},["cartera","oficina","tipoPersona"].forEach(t=>{f(this._filtros.querySelector("#"+t),".colapsado")?this._statecol[t]=!0:this._statecol[t]=!1}))}_paintFiltros(){this._backupState();const t=this._filtros.querySelector(".filter");t.innerHTML="";const e=document.createElement("div");e.innerHTML=i(14),t.appendChild(e);const n=function(t){const e={cartera:{},oficina:{},tipoPersona:{}};return t.forEach(t=>{t.tipocartera_desc&&!e.cartera[t.tipocartera_desc]?e.cartera[t.tipocartera_desc]=1:t.tipocartera_desc&&(e.cartera[t.tipocartera_desc]+=1),t.tipopersona_desc&&!e.tipoPersona[t.tipopersona_desc]?e.tipoPersona[t.tipopersona_desc]=1:t.tipopersona_desc&&(e.tipoPersona[t.tipopersona_desc]+=1),t.oficina.forEach(t=>{e.oficina[t]?e.oficina[t]+=1:e.oficina[t]=1})}),e}(this._registros),o=i(15);this._statecol&&Object.keys(this._statecol).forEach(t=>{this._statecol[t]&&this._filtros.querySelector("#"+t).classList.add("colapsado"),!this._statecol[t]&&this._filtros.querySelector("#"+t).classList.remove("colapsado")}),Object.keys(n).forEach(e=>{[...Object.keys(n[e])].sort().forEach(i=>{const r=document.createElement("div");r.innerHTML=o,r.querySelector("span").innerText=i+" ("+String(n[e][i])+")",r.setAttribute("data-seccion",e),r.setAttribute("data-input",i),t.querySelector("#"+e+" .children").appendChild(r)})})}}function w(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{},n=Object.keys(i);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(i).filter(function(t){return Object.getOwnPropertyDescriptor(i,t).enumerable}))),n.forEach(function(e){y(t,e,i[e])})}return t}function y(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}const v=400;function x(t,e){let i={t:0,l:0};if(!t)return i;let n=e;for(;n&&n!=t;)(n=n.parentNode||n.host).scrollTop&&(i.t+=n.scrollTop),n.scrollLeft&&(i.l+=n.scrollLeft);return i}function L(t){return{left:function(t,e=document.documentElement){
//!!padre debe ser posicionado!!!
let i=t,n=i.offsetLeft-x(i.offsetParent,i).l;for(;i.offsetParent&&i.offsetParent!=e;)n+=(i=i.offsetParent).offsetLeft-x(i.offsetParent,i).l;return n}(t),top:function(t,e=document.documentElement){
//!!padre debe ser posicionado!!!
let i=t,n=i.offsetTop-x(i.offsetParent,i).t;for(;i.offsetParent&&i.offsetParent!=e;)n+=(i=i.offsetParent).offsetTop-x(i.offsetParent,i).t;return n}(t),width:t.offsetWidth,height:t.offsetHeight}}function _(t,e){return t.closest(e)==t}function j(t){const e="80"===t.bloqueado;let i=!1;if(t.confidencialidad){const e=parseInt(t.confidencialidad,10);!isNaN(e)&&e>100&&(i=!0)}return e||i}window.customElements.define("bk-busc-emp",class extends HTMLElement{constructor(){super();const t=this.attachShadow({mode:"open"});t.innerHTML="<style>"+s.a+"</style>"+o.a,this._input=t.querySelector("#client input"),this._client=t.querySelector("#client"),this._manejadorInterno=t.querySelector(".manejadorInterno"),this._manejador=t.querySelector(".manejador"),this._handleManejadorInterno=this._handleManejadorInterno.bind(this),this._handle=this._handle.bind(this),this._buscar=this._buscar.bind(this),this._value="",this._capa=void 0,this._settimeout=void 0,this._registros=[],this._click=this._click.bind(this),this._instanciaPredictivo=void 0,this._raw=void 0,this._bloqueados=0}_buscar(){this._ocultarCapa(),this._value=this._input.value="",C().then(t=>{t.numCli&&this.dispatchItem(t)}).catch(t=>{console.log(t)})}get user(){return this.getAttribute("user")}set user(t){this.setAttribute("user",t)}get oficina(){return this.getAttribute("oficina")}set oficina(t){this.setAttribute("oficina",t)}get entidad(){return this.getAttribute("entidad")}set entidad(t){this.setAttribute("entidad",t)}_fill(t){return this._value.split(" ").forEach(e=>{t=t.replace(new RegExp("("+e+")","ig"),"<b>$1</b>")}),t}_paint(t,e){const n=this._capa.shadowRoot.querySelector(".cli"),o=this._capa.shadowRoot.querySelector(".pie b"),r=this._capa.shadowRoot.querySelector(".pie i");o.innerText=this._value,r.innerText=String(e);const s=this._capa.shadowRoot.querySelector(".pie .bloqueados");if(this._bloqueados>0?(s.classList.add("visible"),s.querySelector("b").innerText=String(this._bloqueados)):s.classList.remove("visible"),this._capa.shadowRoot.host.style.display="flex",n.innerHTML="",0==t.length)return n.innerText="Ninguna coincidencia",void(this._capa.shadowRoot.querySelector(".pie").style.visibility="hidden");this._capa.shadowRoot.querySelector(".pie").style.visibility="visible",t.filter(t=>!t.oculto).forEach(t=>{const e=document.createElement("div");e.classList.add("fila"),e.setAttribute("data-id",t.id),e.innerHTML=i(16),e.querySelector(".documento").innerHTML=this._fill(t.documento),e.querySelector(".nombre").innerHTML=this._fill(t.nombre),e.querySelector(".localidad").innerHTML=this._fill(t.localidad),e.querySelector(".domicilio").innerHTML=this._fill(t.domicilio),n.appendChild(e)})}_search(t){this._capa&&(this._capa.shadowRoot.querySelector(".cli").style.opacity=.5,this._client.classList.add("progreso"),this._instanciaPredictivo.getData(t).then(t=>{if(this._client.classList.remove("progreso"),!this._capa)return;this._raw=t,this._registros=[],this._bloqueados=0;const e=(t.results.cartera?t.results.cartera.numFound:0)+(t.results.oficina?t.results.oficina.numFound:0)+(t.results.otros?t.results.otros.numFound:0);t.results.cartera&&t.results.cartera.docs.forEach(t=>{const e=j(t);e&&(this._bloqueados+=1),this._registros.push(w({},t,{oculto:e}))}),t.results.oficina&&t.results.oficina.docs.forEach(t=>{const e=j(t);e&&(this._bloqueados+=1),this._registros.push(w({},t,{oculto:e}))}),t.results.otros&&t.results.otros.docs.forEach(t=>{const e=j(t);e&&(this._bloqueados+=1),this._registros.push(w({},t,{oculto:e}))}),console.log(this._bloqueados);const i=this._registros.map(t=>({documento:t.documento||"-",nombre:(t.nombre?t.nombre:"")+(t.apellidos?" "+t.apellidos:""),localidad:t.localidad?t.localidad:"-",domicilio:t.domicilio?t.domicilio:"-",id:t.id,oculto:t.oculto}));this._paint(i,e),this._capa.shadowRoot.querySelector(".cli").style.opacity=1}).catch(t=>{this._client.classList.remove("progreso"),console.log(t),this._capa.shadowRoot.querySelector(".cli").style.opacity=1}))}_handleManejadorInterno(){_(this._manejadorInterno,".activo")&&(this._ocultarCapa(),this._value=this._input.value="")}_handle(t){"Escape"!==t.key?"Enter"===t.key&&this._registros.length>0?this._verTodo():(this._input.value.trim().length>=3&&this._input.value.trim()!==this._value?(this._manejadorInterno.classList.add("activo"),this._mostrarIfNotCapa(t),this._settimeout&&clearTimeout(this._settimeout),this._settimeout=setTimeout(()=>{this._search(this._input.value.trim())},v)):this._input.value.trim().length<3&&this._ocultarCapa(),this._value=this._input.value.trim()):this._ocultarCapa()}_mostrarIfNotCapa(t){if(this._capa)return;const e=t.composedPath()[0];this._capa=document.createElement("aside");const n=c();this._capa.style.zIndex=n?String(n):"auto";const o=L(e);this._capa.attachShadow({mode:"open"}).innerHTML="<style>"+i(17)+"</style>"+i(20),function(t,e){t.shadowRoot.querySelector(".cli");const i=document.documentElement.clientWidth,n=document.documentElement.clientHeight;let o=!1,r=!0;e.left<i/2&&(o=!0),e.top>n/2&&(r=!1),o?(t.style.left=String(e.left)+"px",t.style.maxWidth=String(i-e.left-10)+"px"):(t.style.right=String(i-e.left-e.width)+"px",t.style.maxWidth=String(e.left+e.width-10)+"px"),r?(t.style.top=String(e.top+e.height+1)+"px",t.style.maxHeight=String(n-e.top-e.height-10)+"px",t.style.boxShadow="3px 4px 2px #aaa"):(t.style.bottom=String(n-e.top+1)+"px",t.style.maxHeight=String(e.top-10)+"px",t.style.boxShadow="2px -4px 2px #aaa")}(this._capa,o),this._capa.shadowRoot.host.style.font=window.getComputedStyle(this.shadowRoot.host).font,this._capa.shadowRoot.host.addEventListener("click",this._click),this._capa.shadowRoot.host.style.display="none",document.body.appendChild(this._capa)}_ocultarCapa(){this._manejadorInterno.classList.remove("activo"),this._capa&&this._capa.shadowRoot.host.removeEventListener("click",this._click),this._capa&&document.body.removeChild(this._capa),this._capa=void 0}_click(t){const e=t.composedPath()[0];if(_(e,".aspa"))return this._ocultarCapa(),void(this._value=this._input.value="");if(_(e,".verTodo")||_(e,".pie")||_(e.parentNode,".verTodo"))return void this._verTodo();if(!_(e,".celda")&&!_(e.parentNode,".celda"))return;const i=e.closest(".fila").getAttribute("data-id"),n=this._registros.find(t=>t.id===i);this._ocultarCapa(),this.dispatchItem(n)}dispatchItem(t){const e=A(t);this._value=this._input.value=e.base.nombre,this.value=e.base.id,this.dispatchEvent(new CustomEvent("bk-seleccion",{detail:e,bubbles:!0}))}connectedCallback(){this._manejadorInterno.addEventListener("click",this._handleManejadorInterno),this._manejador.addEventListener("click",this._buscar),this._input.addEventListener("keyup",this._handle),this._upgradeProperty("user"),this._upgradeProperty("oficina"),this._upgradeProperty("entidad"),this._instanciaPredictivo=u(this.getAttribute("user"),this.getAttribute("oficina"),this.getAttribute("entidad"))}disconnectedCallback(){this._client.removeEventListener("keyup",this._handle),this._manejadorInterno.removeEventListener("click",this._handleManejadorInterno),this._manejador.removeEventListener("click",this._buscar)}_upgradeProperty(t){if(this.hasOwnProperty(t)){const e=this[t];delete this[t],this[t]=e}}_verTodo(){if(this._value.trim().length<3||!this._raw)return;const t=new m(this);this._ocultarCapa(),this._value=this._input.value="",t.go()}})}])});
//# sourceMappingURL=index.min.js.map